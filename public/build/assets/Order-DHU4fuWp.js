import{c as Se,r as l,j as e,u as W,a as Pe,x as _e,Q as Ce,t as F,C as Y}from"./app-tu_nxz4H.js";import{u as $,c as X,B as G}from"./button-BZgJU16f.js";import{B as Oe}from"./badge-YbPNhPcJ.js";import{C as q,a as E,b as T,c as L}from"./card-Bw0vLuEn.js";import{I as De}from"./input--XoPGThR.js";import{T as Ie}from"./textarea-BFctAIp6.js";import{L as k}from"./label-rORxKIBW.js";import{a as Ae,c as Z,b as M}from"./index-CPefrJt7.js";import{P as D}from"./index-CZg7sQom.js";import{f as J,R as Fe,I as Ge,C as qe}from"./dropdown-menu-XeOzj3G4.js";import{a as Ee}from"./index-DEJTFC4Z.js";import{u as Te}from"./index-Du654uGJ.js";import{u as Le}from"./index-CvCbp1iq.js";import{P as Me}from"./index-Bzb9Ony0.js";import{C as $e}from"./checkbox-DGy5fYDr.js";import{S as Be}from"./separator-C-d7tlPr.js";import{M as Ue}from"./Navbar-DV3sRKJW.js";import{F as Ve}from"./Footer-DTxvuEvE.js";import{A as ze}from"./arrow-left-CIvlpSYW.js";import{L as Ke}from"./lock-j5fhUESi.js";import{M as He}from"./map-pin-BTfHXcQA.js";import{S as Qe}from"./shield-Lne4-C57.js";import"./index-CUWVWZD9.js";import"./chevron-right-DdsKMi0-.js";import"./sheet-2K7jSFhM.js";import"./DarkModeToggle-Bxo9_sai.js";import"./LanguageDropdown-Czorzu0A.js";import"./loader-circle-CylYfSfh.js";import"./chevron-down-DgvoPxKv.js";import"./Logo-CFql6HBk.js";import"./user-BTZAhoSQ.js";import"./log-out-C_P4AYsR.js";import"./settings-C7X0XRcF.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]],Ye=Se("receipt",We);var B="Radio",[Xe,ee]=Z(B),[Ze,Je]=Xe(B),re=l.forwardRef((s,u)=>{const{__scopeRadio:c,name:a,checked:d=!1,required:i,disabled:f,value:j="on",onCheck:x,form:m,...v}=s,[g,o]=l.useState(null),p=$(u,N=>o(N)),h=l.useRef(!1),b=g?m||!!g.closest("form"):!0;return e.jsxs(Ze,{scope:c,checked:d,disabled:f,children:[e.jsx(D.button,{type:"button",role:"radio","aria-checked":d,"data-state":ie(d),"data-disabled":f?"":void 0,disabled:f,value:j,...v,ref:p,onClick:M(s.onClick,N=>{d||x==null||x(),b&&(h.current=N.isPropagationStopped(),h.current||N.stopPropagation())})}),b&&e.jsx(te,{control:g,bubbles:!h.current,name:a,value:j,checked:d,required:i,disabled:f,form:m,style:{transform:"translateX(-100%)"}})]})});re.displayName=B;var se="RadioIndicator",ae=l.forwardRef((s,u)=>{const{__scopeRadio:c,forceMount:a,...d}=s,i=Je(se,c);return e.jsx(Me,{present:a||i.checked,children:e.jsx(D.span,{"data-state":ie(i.checked),"data-disabled":i.disabled?"":void 0,...d,ref:u})})});ae.displayName=se;var er="RadioBubbleInput",te=l.forwardRef(({__scopeRadio:s,control:u,checked:c,bubbles:a=!0,...d},i)=>{const f=l.useRef(null),j=$(f,i),x=Le(c),m=Te(u);return l.useEffect(()=>{const v=f.current;if(!v)return;const g=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(g,"checked").set;if(x!==c&&p){const h=new Event("click",{bubbles:a});p.call(v,c),v.dispatchEvent(h)}},[x,c,a]),e.jsx(D.input,{type:"radio","aria-hidden":!0,defaultChecked:c,...d,tabIndex:-1,ref:j,style:{...d.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});te.displayName=er;function ie(s){return s?"checked":"unchecked"}var rr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I="RadioGroup",[sr,Mr]=Z(I,[J,ee]),ne=J(),oe=ee(),[ar,tr]=sr(I),ce=l.forwardRef((s,u)=>{const{__scopeRadioGroup:c,name:a,defaultValue:d,value:i,required:f=!1,disabled:j=!1,orientation:x,dir:m,loop:v=!0,onValueChange:g,...o}=s,p=ne(c),h=Ee(m),[b,N]=Ae({prop:i,defaultProp:d??null,onChange:g,caller:I});return e.jsx(ar,{scope:c,name:a,required:f,disabled:j,value:b,onValueChange:N,children:e.jsx(Fe,{asChild:!0,...p,orientation:x,dir:h,loop:v,children:e.jsx(D.div,{role:"radiogroup","aria-required":f,"aria-orientation":x,"data-disabled":j?"":void 0,dir:h,...o,ref:u})})})});ce.displayName=I;var de="RadioGroupItem",le=l.forwardRef((s,u)=>{const{__scopeRadioGroup:c,disabled:a,...d}=s,i=tr(de,c),f=i.disabled||a,j=ne(c),x=oe(c),m=l.useRef(null),v=$(u,m),g=i.value===d.value,o=l.useRef(!1);return l.useEffect(()=>{const p=b=>{rr.includes(b.key)&&(o.current=!0)},h=()=>o.current=!1;return document.addEventListener("keydown",p),document.addEventListener("keyup",h),()=>{document.removeEventListener("keydown",p),document.removeEventListener("keyup",h)}},[]),e.jsx(Ge,{asChild:!0,...j,focusable:!f,active:g,children:e.jsx(re,{disabled:f,required:i.required,checked:g,...x,...d,name:i.name,ref:v,onCheck:()=>i.onValueChange(d.value),onKeyDown:M(p=>{p.key==="Enter"&&p.preventDefault()}),onFocus:M(d.onFocus,()=>{var p;o.current&&((p=m.current)==null||p.click())})})})});le.displayName=de;var ir="RadioGroupIndicator",me=l.forwardRef((s,u)=>{const{__scopeRadioGroup:c,...a}=s,d=oe(c);return e.jsx(ae,{...d,...a,ref:u})});me.displayName=ir;var ue=ce,pe=le,nr=me;const fe=l.forwardRef(({className:s,...u},c)=>e.jsx(ue,{className:X("grid gap-2",s),...u,ref:c}));fe.displayName=ue.displayName;const xe=l.forwardRef(({className:s,...u},c)=>e.jsx(pe,{ref:c,className:X("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...u,children:e.jsx(nr,{className:"flex items-center justify-center",children:e.jsx(qe,{className:"h-2.5 w-2.5 fill-current text-current"})})}));xe.displayName=pe.displayName;function $r({service:s,selectedPackage:u,auth:c}){var H,Q;const{t:a}=W();Pe();const{i18n:d}=W(),i=d.language,f=typeof window<"u"?window.location:{search:""};function j(r){typeof window<"u"&&window.history.replaceState(null,"",`?package=${encodeURIComponent(r)}`)}const x=Array.isArray(s.packages)&&s.packages.length>0;function m(r){return typeof r=="number"?r:typeof r=="string"&&parseInt(r.replace(/[^\d]/g,""),10)||0}function v(){const t=new URLSearchParams(f.search).get("package");if(x&&t){const n=s.packages.find(w=>w.name===t);if(n)return{...n,price:m(n.price)}}return null}const g=v()||(u?{...u,price:m(u.price)}:(H=s.packages)!=null&&H.find(r=>r.isPopular)?{...s.packages.find(r=>r.isPopular),price:m(s.packages.find(r=>r.isPopular).price)}:(Q=s.packages)!=null&&Q[0]?{...s.packages[0],price:m(s.packages[0].price)}:{name:"Standard",price:m(s.price),deliveryTime:s.delivery_time,revisions:s.revisions,features:s.features||[]}),[o,p]=l.useState(g),[h,b]=l.useState(!1),[N,U]=l.useState(!1),{data:S,setData:P,post:he,processing:V,errors:_}=_e({package_name:(o==null?void 0:o.name)||"",package_price:(o==null?void 0:o.price)||0,requirements:"",additional_notes:"",agree_to_terms:!1}),[R,A]=l.useState(()=>{let r=o&&o.requirements||s&&s.requirements||[""];return typeof r=="string"&&(r=[r]),(!Array.isArray(r)||r.length===0)&&(r=[""]),r});l.useEffect(()=>{P("requirements",R.filter(r=>r.trim()!==""))},[R]);const ve=()=>{A([...R,""])},ge=r=>{A(R.filter((t,n)=>n!==r))},je=(r,t)=>{A(R.map((n,w)=>w===r?t:n))},C=r=>{const t=typeof r=="number"&&!isNaN(r)?r:0;if(i==="ar"){let n=new Intl.NumberFormat("ar-EG",{style:"currency",currency:"SDG",minimumFractionDigits:0,maximumFractionDigits:0}).format(t);return n=n.replace(/SDG|ج\.س\.|ج\. س\.|جنيه سوداني|SD£|£SD|\u0633\u002e|\u062c\u002e\u0633\u002e|\u062c\u002e\u0020\u0633\u002e/gi,"ج.س."),n.includes("ج.س.")||(n=`ج.س. ${n.replace(/[^\d.,٬]+/g,"").trim()}`),n}else{let n=new Intl.NumberFormat("en-US",{style:"currency",currency:"SDG",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"}).format(t);return n=n.replace(/SDG|ج\.س\.|ج\. س\.|جنيه سوداني|SD£|£SD|\u0633\u002e|\u062c\u002e\u0633\u002e|\u062c\u002e\u0020\u0633\u002e/gi,"SDG"),n.startsWith("SDG")||(n=`SDG ${n.replace(/[^\d.,]+/g,"").trim()}`),n}},ye=r=>{const t={...r,price:m(r.price)};p(t),P({...S,package_name:t.name,package_price:t.price}),j(t.name)};l.useEffect(()=>{const r=v();r&&r.name!==(o==null?void 0:o.name)&&(p(r),P({...S,package_name:r.name,package_price:r.price}))},[f.search]);const Ne=r=>{if(r.preventDefault(),!h){alert("Please agree to the terms and conditions");return}U(!0),he(`/services/${s.id}/order`,{data:{...S,package_price:m(o.price)},onSuccess:()=>{},onError:()=>{U(!1)}})},be=()=>({serviceFee:0,total:m(o.price)||m(s.price)}),{total:Re}=be(),O=(r,t,n=i)=>n==="ar"&&Array.isArray(r[`${t}_ar`])&&r[`${t}_ar`].length>0?r[`${t}_ar`]:r[t]||[],y=(r,t,n=i)=>n==="ar"?r[`${t}_ar`]||r[t]||"":r[t]||"",z=O(s,"features",i),K=O(s,"packages",i),ke=y(s,"title",i),we=y(s,"description",i);return e.jsxs(e.Fragment,{children:[e.jsx(Ce,{title:`Order - ${s.title}`}),e.jsx(Ue,{auth:c}),e.jsx("div",{className:"min-h-screen bg-background rtl",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs(F,{href:`/services/${s.id}`,className:"inline-flex items-center text-sm text-muted-foreground hover:text-foreground",children:[e.jsx(ze,{className:"w-4 h-4 me-2 rtl:rotate-180"}),a("servicesOrder.backToService","Back to Service")]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 ",children:e.jsxs(q,{children:[e.jsx(E,{children:e.jsxs(T,{className:"flex items-center gap-2",children:[e.jsx(Ye,{className:"w-5 h-5"}),a("servicesOrder.orderDetails","Order Details")]})}),e.jsx(L,{children:e.jsxs("form",{onSubmit:Ne,className:"space-y-6",children:[x?e.jsxs("div",{children:[e.jsx(k,{className:"text-base font-medium",children:a("servicesOrder.selectPackage","Select Package")}),e.jsx(fe,{value:(o==null?void 0:o.name)||"",onValueChange:r=>{const t=K.find(n=>y(n,"name",i)===r);t&&ye(t)},className:"mt-3 rtl",children:e.jsx("div",{className:"space-y-3",children:K.map((r,t)=>e.jsxs(k,{htmlFor:`package-${t}`,className:`block border-2 rounded-lg p-4 cursor-pointer transition-all ${(o==null?void 0:o.name)===y(r,"name",i)?"border-primary bg-primary/5":"border-border hover:border-border"}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:y(r,"name",i)}),r.isPopular&&e.jsx(Oe,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:a("servicesOrder.popular","Popular")})]}),e.jsx("p",{className:"text-2xl font-bold text-primary mt-2",children:C(m(r.price))}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a("servicesOrder.deliveryIn","Delivery in")," ",y(r,"delivery_time",i)||y(r,"deliveryTime",i)||"-"]})]}),e.jsx(xe,{value:y(r,"name",i),id:`package-${t}`,className:"mt-1"})]}),O(r,"features",i).length>0&&e.jsx("div",{className:"mt-4",children:e.jsx("ul",{className:"space-y-2",children:O(r,"features",i).map((n,w)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Y,{className:"w-4 h-4 text-success flex-shrink-0"}),n]},w))})})]},t))})})]}):e.jsxs("div",{children:[e.jsx(k,{className:"text-base font-medium",children:a("servicesOrder.servicePrice","Service Price")}),e.jsxs("div",{className:"border-2 rounded-lg p-4 bg-primary/5 border-primary",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:a("servicesOrder.standard","Standard")}),e.jsx("p",{className:"text-2xl font-bold text-primary mt-2",children:C(s.price)}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[a("servicesOrder.deliveryIn","Delivery in")," ",y(s,"delivery_time",i)||y(s,"deliveryTime",i)||""]}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[y(s,"revisions",i)||""," ",a("servicesOrder.revisions","revisions")]})]})}),z.length>0&&e.jsx("div",{className:"mt-4",children:e.jsx("ul",{className:"space-y-2",children:z.map((r,t)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Y,{className:"w-4 h-4 text-success flex-shrink-0"}),r]},t))})})]})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"requirements",children:a("servicesOrder.projectRequirements","Project Requirements")}),e.jsxs("div",{className:"space-y-2 mt-2",children:[R.map((r,t)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{type:"text",value:r,onChange:n=>je(t,n.target.value),placeholder:a("servicesOrder.requirementN",`Requirement #${t+1}`).replace("{n}",t+1),className:"flex-1"}),R.length>1&&e.jsx(G,{type:"button",variant:"destructive",size:"icon",onClick:()=>ge(t),children:"×"})]},t)),e.jsx(G,{type:"button",variant:"outline",size:"sm",onClick:ve,className:"mt-2",children:a("servicesOrder.addRequirement","+ Add Requirement")})]}),_.requirements&&e.jsx("p",{className:"text-destructive text-sm mt-1",children:_.requirements})]}),e.jsxs("div",{children:[e.jsx(k,{htmlFor:"additional_notes",children:a("servicesOrder.additionalNotes","Additional Notes (Optional)")}),e.jsx(Ie,{id:"additional_notes",placeholder:a("servicesOrder.additionalNotesPlaceholder","Any additional information or special requests..."),value:S.additional_notes,onChange:r=>P("additional_notes",r.target.value),className:"mt-2",rows:3}),_.additional_notes&&e.jsx("p",{className:"text-destructive text-sm mt-1",children:_.additional_notes})]}),e.jsxs("div",{className:"flex items-start ",children:[e.jsx($e,{id:"terms",checked:h,onCheckedChange:b}),e.jsxs(k,{htmlFor:"terms",className:"text-sm ms-2",children:[a("servicesOrder.agreeToTerms","I agree to the")," ",e.jsx(F,{href:"/terms",className:"text-primary hover:underline",children:a("servicesOrder.termsAndConditions","Terms and Conditions")})," ",a("servicesOrder.and","and")," ",e.jsx(F,{href:"/privacy",className:"text-primary hover:underline",children:a("servicesOrder.privacyPolicy","Privacy Policy")})]})]}),e.jsx(G,{type:"submit",className:"w-full",disabled:!h||V||N,children:V||N?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),a("servicesOrder.processing","Processing...")]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ke,{className:"w-4 h-4"}),a("servicesOrder.placeOrderSecurely","Place Order Securely")]})})]})})]})}),e.jsx("div",{className:"lg:col-span-1 ",children:e.jsxs("div",{className:"sticky top-8",children:[e.jsxs(q,{className:"mb-6",children:[e.jsx(E,{children:e.jsx(T,{className:"text-lg",children:a("servicesOrder.serviceDetails","Service Details")})}),e.jsxs(L,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg",children:ke}),e.jsx("p",{className:"text-muted-foreground text-sm mt-1",children:we})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(He,{className:"w-4 h-4"}),s.freelancer.location||a("servicesOrder.locationNotSpecified","Location not specified")]})]})]}),e.jsxs(q,{children:[e.jsx(E,{children:e.jsx(T,{className:"text-lg",children:a("servicesOrder.orderSummary","Order Summary")})}),e.jsxs(L,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:a("servicesOrder.packagePrice","Package Price:")}),e.jsx("span",{className:"font-semibold",children:C(o.price)})]}),x&&e.jsxs(e.Fragment,{children:[e.jsx(Be,{}),e.jsxs("div",{className:"flex justify-between text-lg font-bold",children:[e.jsx("span",{children:a("servicesOrder.total","Total:")}),e.jsx("span",{className:"text-primary",children:C(Re)})]})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-primary/5 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Qe,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-primary",children:a("servicesOrder.securePayment","Secure Payment")}),e.jsx("p",{className:"text-primary/80",children:a("servicesOrder.securePaymentDesc","Your payment is protected by our secure payment system")})]})]})})]})]})]})})]})]})}),e.jsx(Ve,{})]})}export{$r as default};
