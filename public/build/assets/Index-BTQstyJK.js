import{u as X,a as q,r as o,j as e,t as N,Q as J,C as b,S as K,b as M}from"./app-tu_nxz4H.js";import{B as l}from"./button-BZgJU16f.js";import{C as m,c as x,a as Y,b as Z}from"./card-Bw0vLuEn.js";import{F as ee}from"./FreelancerDashboardLayout-Drmnvfzb.js";import{T as se,a as re,b as y,c as ae,d as te,e as F}from"./table-ByW5kVZj.js";import"./select-7ggDdyJM.js";import{I as le}from"./input--XoPGThR.js";import{B as I}from"./badge-YbPNhPcJ.js";import{c as ne,u as ie,f as T,g as ce,a as oe,b as de,d as me}from"./index-mhELI5CK.js";import{D as xe,a as ge,b as he,e as pe}from"./dropdown-menu-XeOzj3G4.js";import{A as g}from"./arrow-up-down-B6ZoVety.js";import{L as w,B as fe}from"./list-checks-Oqfv7s0l.js";import{U as ue}from"./user-BTZAhoSQ.js";import{C as je}from"./calendar-a2parlcl.js";import{E as Ne}from"./eye-d57NAMzT.js";import{E as be}from"./ellipsis-B0AmQ1B-.js";import{L as v}from"./loader-circle-CylYfSfh.js";import{P as _}from"./plus-DnTpGEWW.js";import{T as ye}from"./trending-up-BSQikmfy.js";import{D as we}from"./dollar-sign-CicZaffH.js";import{S as ve}from"./search-CMb3RvSH.js";import{C as Ce}from"./circle-x-CweIOvyj.js";import{S as B}from"./send-DjQ49j8w.js";import{C as ke}from"./clock-BbigxC4A.js";import{P as Se}from"./play-D6LLLLpf.js";import{R as Oe}from"./repeat-DFtFnNoH.js";import"./AppHeader-B8kkmwh_.js";import"./LanguageDropdown-Czorzu0A.js";import"./chevron-down-DgvoPxKv.js";import"./avatar-Br7MV_1H.js";import"./index-CPefrJt7.js";import"./index-CUWVWZD9.js";import"./index-CZg7sQom.js";import"./index-Du654uGJ.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./index-DEJTFC4Z.js";import"./index-Bzb9Ony0.js";import"./skeleton-CNspO5WR.js";import"./index-C4bozPq7.js";import"./package-C35wEl39.js";import"./file-text-CsIm62FH.js";import"./message-square-BLldBHH5.js";import"./wallet-df-tNZSa.js";import"./index-BdQq_4o_.js";import"./index-CvCbp1iq.js";import"./chevron-up-5hDX3Am3.js";import"./chevron-right-DdsKMi0-.js";const d=ne();function ks({orders:h,filters:Re,auth:De,stats:c={}}){var P;const{t:r}=X(),{isRTL:p}=q(),[E,C]=o.useState([]),[L,k]=o.useState([]),[S,f]=o.useState(""),[G,O]=o.useState({}),[V,R]=o.useState({}),[u,j]=o.useState(null),z=s=>new Intl.NumberFormat("ar-SD",{style:"currency",currency:"SDG",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),H=s=>new Date(s).toLocaleDateString(p?"ar-SD":"en-US",{year:"numeric",month:"short",day:"numeric"}),U=s=>{const a={pending:{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",icon:ke},payment_verified:{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",icon:b},in_progress:{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",icon:v},review:{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",icon:B},completed:{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",icon:b},cancelled:{variant:"secondary",className:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",icon:Ce}},t=a[s]||a.pending,n=t.icon;return e.jsxs(I,{variant:t.variant,className:`flex items-center gap-1 ${t.className}`,children:[e.jsx(n,{className:"w-3 h-3"}),r(`freelancerOrders.status.${s}`)]})},A=s=>{const a={pending:{variant:"outline",className:"text-yellow-600 border-yellow-600"},verified:{variant:"outline",className:"text-green-600 border-green-600"},failed:{variant:"outline",className:"text-red-600 border-red-600"}},t=a[s]||a.pending;return e.jsx(I,{variant:t.variant,className:t.className,children:r(`freelancerOrders.paymentStatus.${s}`)})},$=s=>{const a=[],{status:t,payment_status:n}=s;return t==="payment_verified"&&a.push({key:"in_progress",label:r("freelancerOrders.actions.markInProgress"),icon:Se,className:"text-green-600"}),t==="in_progress"&&a.push({key:"review",label:r("freelancerOrders.actions.deliverWork"),icon:B,className:"text-blue-600"}),t==="review"&&a.push({key:"in_progress",label:r("freelancerOrders.actions.markInProgress"),icon:Oe,className:"text-orange-600"}),a},Q=(s,a)=>{j(s+a),K.post(route("freelancer.orders.updateStatus",s),{status:a},{onSuccess:()=>{j(null),M.success(r("freelancerOrders.messages.statusUpdated"))},onError:t=>{j(null);const n=t.status||r("freelancerOrders.messages.updateFailed");M.error(n)}})},D=o.useMemo(()=>[d.accessor("order_number",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[r("freelancerOrders.table.orderNumber"),e.jsx(g,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("span",{className:"font-semibold",children:s.getValue("order_number")})}),d.accessor("service.title",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(w,{className:"me-2 h-4 w-4"}),r("freelancerOrders.table.service"),e.jsx(g,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>{var a;return e.jsx("span",{children:(a=s.original.service)==null?void 0:a.title})}}),d.accessor("client.name",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(ue,{className:"me-2 h-4 w-4"}),r("freelancerOrders.table.client"),e.jsx(g,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>{var a;return e.jsx("span",{children:(a=s.original.client)==null?void 0:a.name})}}),d.accessor("status",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[r("freelancerOrders.table.status"),e.jsx(g,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>U(s.getValue("status"))}),d.accessor("payment_status",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(fe,{className:"me-2 h-4 w-4"}),r("freelancerOrders.table.paymentStatus"),e.jsx(g,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>A(s.getValue("payment_status"))}),d.accessor("created_at",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(je,{className:"me-2 h-4 w-4"}),r("freelancerOrders.table.created"),e.jsx(g,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>H(s.getValue("created_at"))}),d.display({id:"actions",header:()=>e.jsx("span",{className:"sr-only",children:r("freelancerOrders.table.actions")}),cell:({row:s})=>{const a=s.original,t=$(a);return e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{asChild:!0,variant:"ghost",size:"sm",children:e.jsxs(N,{href:`/freelancer/orders/${a.id}`,children:[e.jsx(Ne,{className:"me-2 h-4 w-4"}),r("freelancerOrders.table.view")]})}),t.length>0&&e.jsxs(xe,{children:[e.jsx(ge,{asChild:!0,children:e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsx(he,{align:p?"start":"end",children:t.map(n=>{const W=n.icon;return e.jsxs(pe,{onClick:()=>Q(a.id,n.key),disabled:u===a.id+n.key,className:n.className,children:[u===a.id+n.key?e.jsx(v,{className:"me-2 h-4 w-4 animate-spin"}):e.jsx(W,{className:"me-2 h-4 w-4"}),n.label]},n.key)})})]})]})}})],[r,p,u]),i=ie({data:h.data,columns:D,getCoreRowModel:me(),getFilteredRowModel:de(),getSortedRowModel:oe(),getPaginationRowModel:ce(),onSortingChange:C,onColumnFiltersChange:k,onGlobalFilterChange:f,onColumnVisibilityChange:O,onRowSelectionChange:R,state:{sorting:E,columnFilters:L,globalFilter:S,columnVisibility:G,rowSelection:V}});return e.jsxs(ee,{children:[e.jsx(J,{title:r("freelancerOrders.title")}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:r("freelancerOrders.title")}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:r("freelancerOrders.description")})]}),e.jsx(l,{asChild:!0,className:"flex items-center gap-2",children:e.jsxs(N,{href:route("freelancer.services.create"),children:[e.jsx(_,{className:"h-4 w-4"}),r("freelancerOrders.addNewService")]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r("freelancerOrders.stats.totalEarnings")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:z(c.totalEarnings||0)}),c.earningsGrowth!==void 0&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.earningsGrowth>0?e.jsxs("span",{className:"text-green-600 flex items-center",children:[e.jsx(ye,{className:"w-3 h-3 me-1"}),"+",c.earningsGrowth,"%"]}):c.earningsGrowth===100?e.jsx("span",{className:"text-green-600",children:r("freelancerOrders.stats.newEarnings")}):e.jsx("span",{className:"text-gray-500",children:r("freelancerOrders.stats.noGrowth")})})]}),e.jsx(we,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r("freelancerOrders.stats.totalOrders")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.totalOrders||0})]}),e.jsx(w,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r("freelancerOrders.stats.inProgressOrders")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.inProgressOrders||0})]}),e.jsx(v,{className:"h-8 w-8 text-yellow-500"})]})})}),e.jsx(m,{children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:r("freelancerOrders.stats.completedOrders")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:c.completedOrders||0})]}),e.jsx(b,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})})})]}),e.jsx(m,{className:"mb-6",children:e.jsx(x,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-end",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(ve,{className:"absolute start-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(le,{placeholder:r("freelancerOrders.searchPlaceholder"),value:S??"",onChange:s=>f(s.target.value),className:"ps-10"})]})}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>{f(""),k([]),C([]),O({}),R({})},children:r("freelancerOrders.resetFilters")})]})})}),e.jsxs(m,{children:[e.jsx(Y,{children:e.jsxs(Z,{className:"flex items-center justify-between",children:[e.jsx("span",{children:r("freelancerOrders.ordersList")}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[i.getFilteredRowModel().rows.length," ",r("freelancerOrders.of")," ",h.total," ",r("freelancerOrders.results")]})]})}),e.jsxs(x,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(se,{children:[e.jsx(re,{children:i.getHeaderGroups().map(s=>e.jsx(y,{children:s.headers.map(a=>e.jsx(ae,{className:"h-12",children:a.isPlaceholder?null:T(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(te,{children:(P=i.getRowModel().rows)!=null&&P.length?i.getRowModel().rows.map(s=>e.jsx(y,{"data-state":s.getIsSelected()&&"selected",className:"hover:bg-gray-50 dark:hover:bg-gray-800/50",children:s.getVisibleCells().map(a=>e.jsx(F,{children:T(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(y,{children:e.jsx(F,{colSpan:D.length,className:"h-24 text-center",children:e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-2",children:[e.jsx(w,{className:"h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:r("freelancerOrders.emptyState.title")}),e.jsx("p",{className:"text-sm text-gray-400 dark:text-gray-500",children:r("freelancerOrders.emptyState.description")}),e.jsx(l,{asChild:!0,variant:"outline",size:"sm",children:e.jsxs(N,{href:route("freelancer.services.create"),children:[e.jsx(_,{className:"me-2 h-4 w-4"}),r("freelancerOrders.emptyState.action")]})})]})})})})]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300",children:[r("freelancerOrders.showing")," ",i.getFilteredRowModel().rows.length," ",r("freelancerOrders.of")," ",h.total," ",r("freelancerOrders.results")]}),e.jsxs("div",{className:"space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>i.previousPage(),disabled:!i.getCanPreviousPage(),children:r("freelancerOrders.previous")}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>i.nextPage(),disabled:!i.getCanNextPage(),children:r("freelancerOrders.next")})]})]})]})]})]})}export{ks as default};
