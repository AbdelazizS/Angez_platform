import{c as W,a as E,u as $,r as g,j as e,t as S,Q as J,G as R,S as K,b as f}from"./app-tu_nxz4H.js";import{B as c}from"./button-BZgJU16f.js";import{C as u,c as j,a as X,b as Y}from"./card-Bw0vLuEn.js";import{F as Z}from"./FreelancerDashboardLayout-Drmnvfzb.js";import{D as ee}from"./DeleteConfirmationModal-Dw0x2ucv.js";import{T as se,a as te,b as N,c as ae,d as re,e as I}from"./table-ByW5kVZj.js";import{D as ie,a as le,b as ne,c as ce,d as F,e as w}from"./dropdown-menu-XeOzj3G4.js";import"./select-7ggDdyJM.js";import{I as oe}from"./input--XoPGThR.js";import{B as x}from"./badge-YbPNhPcJ.js";import{c as de,u as me,f as P,g as ge,a as xe,b as he,d as pe}from"./index-mhELI5CK.js";import{A as h}from"./arrow-up-down-B6ZoVety.js";import{D as fe}from"./dollar-sign-CicZaffH.js";import{C as ue}from"./calendar-a2parlcl.js";import{E as je}from"./ellipsis-B0AmQ1B-.js";import{E as ve}from"./eye-d57NAMzT.js";import{T as Se}from"./trash-2-wIOIX_HV.js";import{P as Ne}from"./plus-DnTpGEWW.js";import{P as we}from"./package-C35wEl39.js";import{S as b}from"./settings-C7X0XRcF.js";import{S as be}from"./search-CMb3RvSH.js";import{A as ye}from"./award-CE_s_SyF.js";import{T as Ce}from"./trending-up-BSQikmfy.js";import{L as ke}from"./languages-BFERv8WG.js";import"./AppHeader-B8kkmwh_.js";import"./LanguageDropdown-Czorzu0A.js";import"./loader-circle-CylYfSfh.js";import"./chevron-down-DgvoPxKv.js";import"./avatar-Br7MV_1H.js";import"./index-CPefrJt7.js";import"./index-CUWVWZD9.js";import"./index-CZg7sQom.js";import"./index-Du654uGJ.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./index-DEJTFC4Z.js";import"./index-Bzb9Ony0.js";import"./skeleton-CNspO5WR.js";import"./index-C4bozPq7.js";import"./file-text-CsIm62FH.js";import"./message-square-BLldBHH5.js";import"./wallet-df-tNZSa.js";import"./dialog-BuNxXWGd.js";import"./triangle-alert-Cpf-AceC.js";import"./chevron-right-DdsKMi0-.js";import"./index-BdQq_4o_.js";import"./index-CvCbp1iq.js";import"./chevron-up-5hDX3Am3.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],De=W("square-pen",_e);function y(r){const{isRTL:t}=E(),l=(n,i)=>t&&r[i]&&r[i].trim()?r[i]:r[n]||r[i]||"",o=(n,i)=>t&&r[i]&&r[i].length>0?r[i]:r[n]||r[i]||[];return{title:l("title","title_ar"),description:l("description","description_ar"),detailedDescription:l("detailed_description","detailed_description_ar"),category:l("category","category_ar"),subcategory:l("subcategory","subcategory_ar"),deliveryTime:l("delivery_time","delivery_time_ar"),tags:o("tags","tags_ar"),features:o("features","features_ar"),packages:o("packages","packages_ar"),faq:o("faq","faq_ar"),dynamicSections:r.dynamic_sections||[]}}const d=de();function ys({services:r}){var L;const{t}=$(),{isRTL:l}=E(),[o,n]=g.useState({isOpen:!1,serviceId:null,serviceTitle:"",isLoading:!1}),[i,C]=g.useState([]),[H,k]=g.useState([]),[_,v]=g.useState(""),[B,D]=g.useState({}),[A,T]=g.useState({}),G=s=>new Intl.NumberFormat("ar-SD",{style:"currency",currency:"SDG",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),O=s=>new Date(s).toLocaleDateString(l?"ar-SD":"en-US",{year:"numeric",month:"short",day:"numeric"}),V=s=>s.is_featured?e.jsxs(x,{variant:"secondary",className:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200",children:[e.jsx(ye,{className:"w-3 h-3 me-1"}),t("freelancerServices.status.featured")]}):s.is_popular?e.jsxs(x,{variant:"secondary",className:"bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-200",children:[e.jsx(Ce,{className:"w-3 h-3 me-1"}),t("freelancerServices.status.popular")]}):s.is_popular?e.jsxs(x,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",children:[e.jsx(b,{className:"w-3 h-3 me-1"}),t("admin.services.status.active")]}):e.jsxs(x,{variant:"outline",children:[e.jsx(b,{className:"w-3 h-3 me-1"}),t("admin.services.status.inactive")]}),q=s=>{const a=s.title_ar||s.description_ar,m=s.title||s.description;return a&&m?e.jsxs(x,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(ke,{className:"w-3 h-3"}),t("freelancerServices.language.both")]}):a?e.jsxs(x,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),t("freelancerServices.language.ar")]}):e.jsxs(x,{variant:"outline",className:"flex items-center gap-1",children:[e.jsx(R,{className:"w-3 h-3"}),t("freelancerServices.language.en")]})},M=g.useMemo(()=>[d.accessor("title",{header:({column:s})=>e.jsxs(c,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[t("freelancerServices.table.title"),e.jsx(h,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>{const a=s.original,m=y(a);return e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("div",{className:"font-medium text-gray-900 dark:text-white",children:m.title}),e.jsxs("div",{className:"flex items-center gap-2",children:[V(a),q(a)]})]})}}),d.accessor("category",{header:({column:s})=>e.jsxs(c,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[t("freelancerServices.table.category"),e.jsx(h,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>{const a=s.original,m=y(a);return e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:m.category||"-"})}}),d.accessor("price",{header:({column:s})=>e.jsxs(c,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[t("freelancerServices.table.price"),e.jsx(h,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>e.jsxs("div",{className:"flex items-center gap-1 text-sm font-medium text-gray-900 dark:text-white",children:[e.jsx(fe,{className:"w-3 h-3 text-green-600"}),G(s.getValue("price"))]})}),d.accessor("delivery_time",{header:({column:s})=>e.jsxs(c,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[t("freelancerServices.table.deliveryTime"),e.jsx(h,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>{const a=s.original,m=y(a);return e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsx(ue,{className:"w-3 h-3"}),m.deliveryTime||"-"]})}}),d.accessor("orders_count",{header:({column:s})=>e.jsxs(c,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[t("freelancerServices.table.orders"),e.jsx(h,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:[s.original.orders_count||0," ",t("freelancerServices.table.orders")]})}),d.accessor("title_ar",{header:()=>null,cell:()=>null,enableHiding:!0}),d.accessor("created_at",{header:({column:s})=>e.jsxs(c,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[t("freelancerServices.table.created"),e.jsx(h,{className:"ms-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:O(s.getValue("created_at"))})}),d.display({id:"actions",header:()=>e.jsx("span",{className:"sr-only",children:t("common.actions")}),cell:({row:s})=>{const a=s.original;return e.jsxs(ie,{children:[e.jsx(le,{asChild:!0,children:e.jsxs(c,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:t("common.openMenu")}),e.jsx(je,{className:"h-4 w-4"})]})}),e.jsxs(ne,{align:l?"start":"end",className:"w-48",children:[e.jsx(ce,{children:t("common.actions")}),e.jsx(F,{}),e.jsx(w,{asChild:!0,children:e.jsxs(S,{href:`/services/${a.id}`,className:"flex items-center",children:[e.jsx(ve,{className:"me-2 h-4 w-4"}),t("common.view")]})}),e.jsx(w,{asChild:!0,children:e.jsxs(S,{href:route("freelancer.services.edit",a.id),className:"flex items-center",children:[e.jsx(De,{className:"me-2 h-4 w-4"}),t("common.edit")]})}),e.jsx(F,{}),e.jsxs(w,{onClick:()=>U(a),className:"flex items-center text-red-600 dark:text-red-400",children:[e.jsx(Se,{className:"me-2 h-4 w-4"}),t("common.delete")]})]})]})}})],[t,l]),p=me({data:r,columns:M,getCoreRowModel:pe(),getFilteredRowModel:he(),getSortedRowModel:xe(),getPaginationRowModel:ge(),onSortingChange:C,onColumnFiltersChange:k,onGlobalFilterChange:v,onColumnVisibilityChange:D,onRowSelectionChange:T,state:{sorting:i,columnFilters:H,globalFilter:_,columnVisibility:B,rowSelection:A}}),U=s=>{n({isOpen:!0,serviceId:s.id,serviceTitle:s.title,isLoading:!1})},z=()=>{n(s=>({...s,isLoading:!0})),K.delete(route("freelancer.services.destroy",o.serviceId),{preserveScroll:!0,onSuccess:()=>{n({isOpen:!1,serviceId:null,serviceTitle:"",isLoading:!1}),f.success(t("freelancerServices.deleteSuccess"))},onError:s=>{n(a=>({...a,isLoading:!1})),s!=null&&s.delete_error?f.error(s.delete_error):s!=null&&s.message?f.error(s.message):f.error(t("freelancerServices.deleteGenericError"))},onFinish:()=>{n(s=>({...s,isLoading:!1}))}})},Q=()=>{n({isOpen:!1,serviceId:null,serviceTitle:"",isLoading:!1})};return e.jsxs(Z,{children:[e.jsx(J,{title:t("freelancerServices.title")}),e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:t("freelancerServices.title")}),e.jsx("p",{className:"mt-2 text-gray-600 dark:text-gray-400",children:t("freelancerServices.description")})]}),e.jsx(c,{asChild:!0,className:"flex items-center gap-2",children:e.jsxs(S,{href:route("freelancer.services.create"),children:[e.jsx(Ne,{className:"h-4 w-4"}),t("freelancerServices.addNew")]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsx(u,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("freelancerServices.totalServices")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.length})]}),e.jsx(we,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})}),e.jsx(u,{children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:t("freelancerServices.activeServices")}),e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:r.filter(s=>!s.is_popular&&!s.is_featured).length})]}),e.jsx(b,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})})})]}),e.jsx(u,{className:"mb-6",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(be,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(oe,{placeholder:t("freelancerServices.searchPlaceholder"),value:_??"",onChange:s=>v(s.target.value),className:"ps-10"})]})}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{v(""),k([]),C([]),D({}),T({})},children:t("freelancerServices.resetFilters")})]})})}),e.jsxs(u,{children:[e.jsx(X,{children:e.jsxs(Y,{className:"flex items-center justify-between",children:[e.jsx("span",{children:t("freelancerServices.servicesList")}),e.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[p.getFilteredRowModel().rows.length," ",t("freelancerServices.of")," ",r.length," ",t("freelancerServices.services")]})]})}),e.jsx(j,{children:e.jsx("div",{className:"rounded-md border",children:e.jsxs(se,{children:[e.jsx(te,{children:p.getHeaderGroups().map(s=>e.jsx(N,{children:s.headers.map(a=>e.jsx(ae,{children:a.isPlaceholder?null:P(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(re,{children:(L=p.getRowModel().rows)!=null&&L.length?p.getRowModel().rows.map(s=>e.jsx(N,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(a=>e.jsx(I,{children:P(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(N,{children:e.jsx(I,{colSpan:M.length,className:"h-24 text-center",children:t("freelancerServices.noServicesFound")})})})]})})})]}),e.jsx(ee,{isOpen:o.isOpen,onClose:Q,onConfirm:z,title:t("freelancerServices.deleteConfirm"),description:t("freelancerServices.deleteWarning"),confirmText:t("common.delete"),cancelText:t("common.cancel"),isLoading:o.isLoading})]})}export{ys as default};
