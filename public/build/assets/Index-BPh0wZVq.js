import{u as Y,a as Z,r as l,j as e,C as ee,Q as se}from"./app-tu_nxz4H.js";import{B as o}from"./button-BZgJU16f.js";import{C as I,a as O,b as $,c as B}from"./card-Bw0vLuEn.js";import{A as ae}from"./AdminLayout-Dmogl9Wd.js";import{T as re,a as te,b as u,c as oe,d as ne,e as w}from"./table-ByW5kVZj.js";import{D as le,a as ie,b as de,c as ce,d as me,e as ge}from"./dropdown-menu-XeOzj3G4.js";import{S as xe,a as pe,b as he,c as ue,d as je}from"./select-7ggDdyJM.js";import"./input--XoPGThR.js";import{B as A}from"./badge-YbPNhPcJ.js";import{D as fe,a as be,b as we,c as Ne,d as ve,e as Ce}from"./dialog-BuNxXWGd.js";import{c as Se,u as ye,f as H,g as ke,a as Pe,b as De,d as Me}from"./index-mhELI5CK.js";import{A as m}from"./arrow-up-down-B6ZoVety.js";import{L as Le,B as Re}from"./list-checks-Oqfv7s0l.js";import{U as E}from"./user-BTZAhoSQ.js";import{C as Te}from"./calendar-a2parlcl.js";import{E as Fe}from"./ellipsis-B0AmQ1B-.js";import{E as _e}from"./eye-d57NAMzT.js";import{P as Ie}from"./package-C35wEl39.js";import{C as Oe}from"./clock-BbigxC4A.js";import{C as $e}from"./circle-x-CweIOvyj.js";import{D as Be}from"./dollar-sign-CicZaffH.js";import{C as Ae,a as He}from"./chevron-last-DHuAoB66.js";import{C as Ee}from"./chevron-left-BzXhZBND.js";import{C as Ge}from"./chevron-right-DdsKMi0-.js";import"./AppHeader-B8kkmwh_.js";import"./LanguageDropdown-Czorzu0A.js";import"./loader-circle-CylYfSfh.js";import"./chevron-down-DgvoPxKv.js";import"./avatar-Br7MV_1H.js";import"./index-CPefrJt7.js";import"./index-CUWVWZD9.js";import"./index-CZg7sQom.js";import"./index-Du654uGJ.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./index-DEJTFC4Z.js";import"./index-Bzb9Ony0.js";import"./skeleton-CNspO5WR.js";import"./index-C4bozPq7.js";import"./shield-Lne4-C57.js";import"./briefcase-uRVTc7Lp.js";import"./file-text-CsIm62FH.js";import"./credit-card-Bb6y7JVl.js";import"./wallet-df-tNZSa.js";import"./users-CR2iJthz.js";import"./index-BdQq_4o_.js";import"./index-CvCbp1iq.js";import"./chevron-up-5hDX3Am3.js";const c=Se();function Es({orders:x={},stats:p={}}){var y,k,P,D;const{t:a}=Y(),{isRTL:n}=Z(),h=Array.isArray(x)?x:(x==null?void 0:x.data)||[],G=!h||h.length===0,[i,U]=l.useState(null),[z,N]=l.useState(!1),[g,Ue]=l.useState(""),[j,ze]=l.useState("all"),[f,Ve]=l.useState("all"),[V,Q]=l.useState([]),[X,q]=l.useState({pageIndex:0,pageSize:10}),J=l.useMemo(()=>{let s=h;return g&&(s=s.filter(r=>{var d,M,L,R,T,F,_;return((d=r.order_number)==null?void 0:d.toLowerCase().includes(g.toLowerCase()))||((L=(M=r.client)==null?void 0:M.name)==null?void 0:L.toLowerCase().includes(g.toLowerCase()))||((T=(R=r.freelancer)==null?void 0:R.name)==null?void 0:T.toLowerCase().includes(g.toLowerCase()))||((_=(F=r.service)==null?void 0:F.title)==null?void 0:_.toLowerCase().includes(g.toLowerCase()))})),j!=="all"&&(s=s.filter(r=>r.status===j)),f!=="all"&&(s=s.filter(r=>r.payment_status===f)),s},[h,g,j,f]),K=s=>new Intl.NumberFormat("ar-SD",{style:"currency",currency:"SDG",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),v=s=>new Date(s).toLocaleDateString(n?"ar-SD":"en-US",{year:"numeric",month:"short",day:"numeric"}),C=s=>{const r={pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",text:a("admin.orders.status.pending","Pending")},completed:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",text:a("admin.orders.status.completed","Completed")},cancelled:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",text:a("admin.orders.status.cancelled","Cancelled")},in_progress:{color:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200",text:a("admin.orders.status.inProgress","In Progress")}},d=r[s]||r.pending;return e.jsx(A,{className:d.color,children:d.text})},S=s=>{const r={paid:{color:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200",text:a("admin.orders.payment.paid","Paid")},unpaid:{color:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200",text:a("admin.orders.payment.unpaid","Unpaid")},pending:{color:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",text:a("admin.orders.payment.pending","Pending")}},d=r[s]||r.pending;return e.jsx(A,{className:d.color,children:d.text})},b=l.useMemo(()=>[c.accessor("order_number",{header:({column:s})=>e.jsxs(o,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:["# ",e.jsx(m,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("span",{className:"font-semibold",children:s.original.order_number})}),c.accessor("service.title",{header:({column:s})=>e.jsxs(o,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(Le,{className:"mr-2 h-4 w-4"}),a("admin.orders.table.service","Service")," ",e.jsx(m,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{var r;return(r=s.original.service)==null?void 0:r.title}}),c.accessor("client.name",{header:({column:s})=>e.jsxs(o,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),a("admin.orders.table.client","Client")," ",e.jsx(m,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{var r;return(r=s.original.client)==null?void 0:r.name}}),c.accessor("freelancer.name",{header:({column:s})=>e.jsxs(o,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),a("admin.orders.table.freelancer","Freelancer")," ",e.jsx(m,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{var r;return(r=s.original.freelancer)==null?void 0:r.name}}),c.accessor("status",{header:({column:s})=>e.jsxs(o,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[a("admin.orders.table.status","Status")," ",e.jsx(m,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>C(s.original.status)}),c.accessor("payment_status",{header:({column:s})=>e.jsxs(o,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(Re,{className:"mr-2 h-4 w-4"}),a("admin.orders.table.payment","Payment")," ",e.jsx(m,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>S(s.original.payment_status)}),c.accessor("created_at",{header:({column:s})=>e.jsxs(o,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(Te,{className:"mr-2 h-4 w-4"}),a("admin.orders.table.created","Created")," ",e.jsx(m,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>v(s.original.created_at)}),c.display({id:"actions",header:()=>e.jsx("span",{className:"sr-only",children:a("common.actions")}),cell:({row:s})=>e.jsxs(le,{children:[e.jsx(ie,{asChild:!0,children:e.jsxs(o,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:a("common.openMenu")}),e.jsx(Fe,{className:"h-4 w-4"})]})}),e.jsxs(de,{align:n?"start":"end",className:"w-40",children:[e.jsx(ce,{children:a("common.actions")}),e.jsx(me,{}),e.jsxs(ge,{onClick:()=>{U(s.original),N(!0)},children:[e.jsx(_e,{className:"me-2 h-4 w-4"}),a("common.view")]})]})]})})],[a,n]),t=ye({data:J,columns:b,getCoreRowModel:Me(),getFilteredRowModel:De(),getSortedRowModel:Pe(),getPaginationRowModel:ke(),onSortingChange:Q,onPaginationChange:q,state:{sorting:V,pagination:X}}),W=[{title:a("admin.orders.stats.totalOrders","Total Orders"),value:p.total_orders||0,icon:Ie,color:"text-blue-600",bgColor:"bg-blue-50 dark:bg-blue-900/20"},{title:a("admin.orders.stats.completedOrders","Completed"),value:p.completed_orders||0,icon:ee,color:"text-green-600",bgColor:"bg-green-50 dark:bg-green-900/20"},{title:a("admin.orders.stats.pendingOrders","Pending"),value:p.pending_orders||0,icon:Oe,color:"text-yellow-600",bgColor:"bg-yellow-50 dark:bg-yellow-900/20"},{title:a("admin.orders.stats.cancelledOrders","Cancelled"),value:p.cancelled_orders||0,icon:$e,color:"text-red-600",bgColor:"bg-red-50 dark:bg-red-900/20"},{title:a("admin.orders.stats.totalRevenue","Total Revenue"),value:K(p.total_revenue||0),icon:Be,color:"text-emerald-600",bgColor:"bg-emerald-50 dark:bg-emerald-900/20"}];return e.jsxs(ae,{children:[e.jsx(se,{title:a("admin.orders.title","Orders Management")}),e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:a("admin.orders.title","Orders Management")}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:a("admin.orders.description","View and manage all orders on the platform.")})]}),e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 mb-8",children:W.map((s,r)=>e.jsxs(I,{className:"hover:shadow-lg transition-all duration-200",children:[e.jsxs(O,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx($,{className:"text-sm font-medium text-muted-foreground",children:s.title}),e.jsx("div",{className:`p-2 rounded-lg ${s.bgColor}`,children:e.jsx(s.icon,{className:`h-4 w-4 ${s.color}`})})]}),e.jsx(B,{children:e.jsx("div",{className:"text-2xl font-bold text-foreground",children:s.value})})]},r))}),e.jsxs(I,{children:[e.jsx(O,{children:e.jsxs($,{className:"flex items-center justify-between",children:[e.jsx("span",{children:a("admin.orders.ordersList","Orders List")}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.getFilteredRowModel().rows.length," ",a("admin.orders.results","results")]})]})}),e.jsxs(B,{children:[e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:e.jsxs(re,{children:[e.jsx(te,{children:t.getHeaderGroups().map(s=>e.jsx(u,{children:s.headers.map(r=>e.jsx(oe,{children:r.isPlaceholder?null:H(r.column.columnDef.header,r.getContext())},r.id))},s.id))}),e.jsx(ne,{children:G?e.jsx(u,{children:e.jsx(w,{colSpan:b.length,className:"h-24 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:a("admin.orders.loading","Loading orders...")})]})})}):(y=t.getRowModel().rows)!=null&&y.length?t.getRowModel().rows.map(s=>e.jsx(u,{children:s.getVisibleCells().map(r=>e.jsx(w,{children:H(r.column.columnDef.cell,r.getContext())},r.id))},s.id)):e.jsx(u,{children:e.jsx(w,{colSpan:b.length,className:"h-24 text-center",children:a("admin.orders.noOrdersFound","No orders found.")})})})]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[a("admin.orders.pagination.showing","Showing")," ",t.getFilteredRowModel().rows.length," ",a("admin.orders.pagination.of","of")," ",h.length," ",a("admin.orders.pagination.results","results")]}),e.jsxs("div",{className:`flex items-center ${n?"space-x-reverse space-x-6 lg:space-x-reverse lg:space-x-8":"space-x-6 lg:space-x-8"}`,children:[e.jsxs("div",{className:`flex items-center ${n?"space-x-reverse space-x-2":"space-x-2"}`,children:[e.jsx("p",{className:"text-sm font-medium",children:a("admin.orders.pagination.rowsPerPage","Rows per page")}),e.jsxs(xe,{value:`${t.getState().pagination.pageSize}`,onValueChange:s=>{t.setPageSize(Number(s))},children:[e.jsx(pe,{className:"h-8 w-[70px]",children:e.jsx(he,{placeholder:t.getState().pagination.pageSize})}),e.jsx(ue,{side:"top",children:[10,20,30,40,50].map(s=>e.jsx(je,{value:`${s}`,children:s},s))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:[a("admin.orders.pagination.page","Page")," ",t.getState().pagination.pageIndex+1," ",a("admin.orders.pagination.of","of")," ",t.getPageCount()]}),e.jsxs("div",{className:`flex items-center ${n?"space-x-reverse space-x-2":"space-x-2"}`,children:[e.jsxs(o,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.orders.pagination.goToFirst","Go to first page")}),e.jsx(Ae,{className:`h-4 w-4  ${n?"rotate-180":""}`})]}),e.jsxs(o,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.orders.pagination.goToPrevious","Go to previous page")}),e.jsx(Ee,{className:`h-4 w-4 ${n?"rotate-180":""}`})]}),e.jsxs(o,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.orders.pagination.goToNext","Go to next page")}),e.jsx(Ge,{className:`h-4 w-4 ${n?"rotate-180":""}`})]}),e.jsxs(o,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.orders.pagination.goToLast","Go to last page")}),e.jsx(He,{className:`h-4 w-4  ${n?"rotate-180":""}`})]})]})]})]})]})]})]}),e.jsx(fe,{open:z,onOpenChange:N,children:e.jsxs(be,{className:"max-w-lg",children:[e.jsx(we,{children:e.jsx(Ne,{children:a("admin.orders.detailsTitle","Order Details")})}),i&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.orders.details.orderNumber","Order #")}),e.jsx("div",{className:"font-semibold",children:i.order_number})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.orders.details.service","Service")}),e.jsx("div",{children:(k=i.service)==null?void 0:k.title})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.orders.details.client","Client")}),e.jsx("div",{children:(P=i.client)==null?void 0:P.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.orders.details.freelancer","Freelancer")}),e.jsx("div",{children:(D=i.freelancer)==null?void 0:D.name})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.orders.details.status","Status")}),e.jsx("div",{className:"capitalize",children:C(i.status)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.orders.details.paymentStatus","Payment Status")}),e.jsx("div",{className:"capitalize",children:S(i.payment_status)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:a("admin.orders.details.created","Created")}),e.jsx("div",{children:v(i.created_at)})]})]}),e.jsx(ve,{children:e.jsx(Ce,{asChild:!0,children:e.jsx(o,{variant:"outline",children:a("common.close","Close")})})})]})})]})}export{Es as default};
