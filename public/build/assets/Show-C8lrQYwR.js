import{r as n,j as e,Q as G,C as V,S as D,b as m}from"./app-tu_nxz4H.js";import{B as i}from"./button-BZgJU16f.js";import{C as k,a as M,b as T,d as P,c as R}from"./card-Bw0vLuEn.js";import{A as q}from"./AdminLayout-Dmogl9Wd.js";import{T as Q,a as J,b as u,c as K,d as X,e as F}from"./table-ByW5kVZj.js";import{D as Y,a as Z,b as ee,c as se,e as te}from"./dropdown-menu-XeOzj3G4.js";import{D as ae,a as re,b as ie,c as oe,f as ne,d as le}from"./dialog-BuNxXWGd.js";import{I}from"./input--XoPGThR.js";import{B as h}from"./badge-YbPNhPcJ.js";import{S as ce,a as de,b as me,c as pe,d as xe}from"./select-7ggDdyJM.js";import{c as ue,u as he,f as _,g as ge,a as je,b as fe,d as Ne}from"./index-mhELI5CK.js";import{A}from"./arrow-up-down-B6ZoVety.js";import{L,M as B}from"./minus-C7gZPW39.js";import{L as O}from"./lock-j5fhUESi.js";import{E as be}from"./ellipsis-B0AmQ1B-.js";import{P as g}from"./plus-DnTpGEWW.js";import{C as Ce,a as ve}from"./chevron-last-DHuAoB66.js";import{C as we}from"./chevron-left-BzXhZBND.js";import{C as ye}from"./chevron-right-DdsKMi0-.js";import{D as Se}from"./download-ynPO2CN2.js";import{C as De}from"./clock-BbigxC4A.js";import"./AppHeader-B8kkmwh_.js";import"./LanguageDropdown-Czorzu0A.js";import"./loader-circle-CylYfSfh.js";import"./chevron-down-DgvoPxKv.js";import"./avatar-Br7MV_1H.js";import"./index-CPefrJt7.js";import"./index-CUWVWZD9.js";import"./index-CZg7sQom.js";import"./index-Du654uGJ.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./index-DEJTFC4Z.js";import"./index-Bzb9Ony0.js";import"./skeleton-CNspO5WR.js";import"./index-C4bozPq7.js";import"./shield-Lne4-C57.js";import"./briefcase-uRVTc7Lp.js";import"./file-text-CsIm62FH.js";import"./credit-card-Bb6y7JVl.js";import"./wallet-df-tNZSa.js";import"./users-CR2iJthz.js";import"./index-BdQq_4o_.js";import"./index-CvCbp1iq.js";import"./chevron-up-5hDX3Am3.js";const o=ue();function Ns({wallet:r,transactions:p}){var y;const[$,l]=n.useState(!1),[c,j]=n.useState("credit"),[f,N]=n.useState(""),[b,C]=n.useState(""),d=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(s),v=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),H=s=>s?e.jsxs(h,{variant:"destructive",className:"flex items-center gap-1 w-fit",children:[e.jsx(O,{className:"w-3 h-3"}),"Locked"]}):e.jsxs(h,{variant:"secondary",className:"flex items-center gap-1 w-fit",children:[e.jsx(L,{className:"w-3 h-3"}),"Active"]}),E=s=>{const a={credit:{label:"Credit",color:"bg-green-100 text-green-800",icon:g},debit:{label:"Debit",color:"bg-red-100 text-red-800",icon:B},payout:{label:"Payout",color:"bg-blue-100 text-blue-800",icon:Se},refund:{label:"Refund",color:"bg-purple-100 text-purple-800",icon:V}},{label:x,color:S,icon:z}=a[s]||{label:"Unknown",color:"bg-gray-100 text-gray-800",icon:De};return e.jsxs(h,{className:`${S} dark:${S.replace("100","900").replace("800","200")} flex items-center gap-1 w-fit`,children:[e.jsx(z,{className:"w-3 h-3"}),x]})},U=()=>{const s=r.is_locked?"unlock":"lock";D.post(route(`admin.wallets.${s}`,r.id),{},{preserveScroll:!0,onSuccess:()=>m.success(`Wallet ${s}ed successfully`),onError:()=>m.error(`Failed to ${s} wallet`)})},W=s=>{s.preventDefault(),D.post(route("admin.wallets.manual"),{user_id:r.user.id,type:c,amount:parseFloat(f),reason:b},{preserveScroll:!0,onSuccess:()=>{l(!1),N(""),C(""),m.success("Operation completed successfully")},onError:a=>{m.error(a.message||"Failed to perform operation")}})},w=n.useMemo(()=>[o.accessor("id",{header:"#",cell:({row:s})=>`#${s.original.id}`}),o.accessor("type",{header:"Type",cell:({row:s})=>E(s.original.type)}),o.accessor("amount",{header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:["Amount",e.jsx(A,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>{const a=s.original.type,x=parseFloat(s.original.amount);return e.jsxs("span",{className:a==="credit"?"text-green-600 font-medium":"text-red-600 font-medium",children:[a==="credit"?"+":"-",d(x)]})}}),o.accessor("description",{header:"Description",cell:({row:s})=>e.jsx("div",{className:"max-w-[200px] truncate",children:s.original.description})}),o.accessor("created_at",{header:({column:s})=>e.jsxs(i,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:["Date",e.jsx(A,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>v(s.original.created_at)}),o.accessor("reference_id",{header:"Reference",cell:({row:s})=>e.jsx("span",{className:"font-mono text-sm",children:s.original.reference_id||"N/A"})})],[]),t=he({data:p,columns:w,getCoreRowModel:Ne(),getFilteredRowModel:fe(),getSortedRowModel:je(),getPaginationRowModel:ge(),initialState:{pagination:{pageSize:10},sorting:[{id:"created_at",desc:!0}]}});return e.jsxs(q,{children:[e.jsx(G,{title:`Wallet - ${r.user.name}`}),e.jsxs("div",{className:"py-6 px-4 sm:px-6 lg:px-8 space-y-6",children:[e.jsxs(k,{children:[e.jsx(M,{className:"border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(T,{children:[r.user.name,"'s Wallet"]}),e.jsxs(P,{children:["User ID: ",r.user.id," | Created: ",v(r.created_at)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[H(r.is_locked),e.jsx(i,{variant:r.is_locked?"default":"destructive",size:"sm",onClick:U,children:r.is_locked?e.jsxs(e.Fragment,{children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Unlock"]}):e.jsxs(e.Fragment,{children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Lock"]})}),e.jsxs(Y,{children:[e.jsx(Z,{asChild:!0,children:e.jsx(i,{variant:"outline",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(be,{className:"h-4 w-4"})})}),e.jsxs(ee,{align:"end",children:[e.jsx(se,{children:"Actions"}),e.jsxs(te,{onClick:()=>l(!0),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Manual Operation"]})]})]})]})]})}),e.jsxs(R,{className:"grid grid-cols-1 md:grid-cols-3 gap-6 p-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Current Balance"}),e.jsx("p",{className:"text-3xl font-bold",children:d(r.balance)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Credits"}),e.jsx("p",{className:"text-2xl font-semibold text-green-600",children:d(r.total_credits||0)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Debits"}),e.jsx("p",{className:"text-2xl font-semibold text-red-600",children:d(r.total_debits||0)})]})]})]}),e.jsxs(k,{children:[e.jsxs(M,{children:[e.jsx(T,{children:"Transaction History"}),e.jsxs(P,{children:[p.length," transactions found"]})]}),e.jsxs(R,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(Q,{children:[e.jsx(J,{children:t.getHeaderGroups().map(s=>e.jsx(u,{children:s.headers.map(a=>e.jsx(K,{children:a.isPlaceholder?null:_(a.column.columnDef.header,a.getContext())},a.id))},s.id))}),e.jsx(X,{children:(y=t.getRowModel().rows)!=null&&y.length?t.getRowModel().rows.map(s=>e.jsx(u,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(a=>e.jsx(F,{children:_(a.column.columnDef.cell,a.getContext())},a.id))},s.id)):e.jsx(u,{children:e.jsx(F,{colSpan:w.length,className:"h-24 text-center",children:"No transactions found"})})})]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:["Showing ",t.getFilteredRowModel().rows.length," of ",p.length," transactions"]}),e.jsxs("div",{className:"flex items-center space-x-6 lg:space-x-8",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"text-sm font-medium",children:"Rows per page"}),e.jsxs(ce,{value:`${t.getState().pagination.pageSize}`,onValueChange:s=>{t.setPageSize(Number(s))},children:[e.jsx(de,{className:"h-8 w-[70px]",children:e.jsx(me,{placeholder:t.getState().pagination.pageSize})}),e.jsx(pe,{side:"top",children:[10,20,30,40,50].map(s=>e.jsx(xe,{value:`${s}`,children:s},s))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:["Page ",t.getState().pagination.pageIndex+1," of ",t.getPageCount()]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(i,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(0),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to first page"}),e.jsx(Ce,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.previousPage(),disabled:!t.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to previous page"}),e.jsx(we,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>t.nextPage(),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to next page"}),e.jsx(ye,{className:"h-4 w-4"})]}),e.jsxs(i,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>t.setPageIndex(t.getPageCount()-1),disabled:!t.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:"Go to last page"}),e.jsx(ve,{className:"h-4 w-4"})]})]})]})]})]})]})]}),e.jsx(ae,{open:$,onOpenChange:l,children:e.jsxs(re,{children:[e.jsxs(ie,{children:[e.jsx(oe,{children:"Manual Wallet Operation"}),e.jsx(ne,{children:"Add or remove funds from this wallet"})]}),e.jsxs("form",{onSubmit:W,children:[e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(i,{type:"button",variant:c==="credit"?"default":"outline",onClick:()=>j("credit"),children:[e.jsx(g,{className:"h-4 w-4 mr-2"}),"Credit"]}),e.jsxs(i,{type:"button",variant:c==="debit"?"destructive":"outline",onClick:()=>j("debit"),children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Debit"]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"amount",className:"block text-sm font-medium",children:"Amount"}),e.jsx(I,{id:"amount",type:"number",min:"0.01",step:"0.01",value:f,onChange:s=>N(s.target.value),placeholder:"Enter amount",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{htmlFor:"description",className:"block text-sm font-medium",children:"Description"}),e.jsx(I,{id:"description",value:b,onChange:s=>C(s.target.value),placeholder:"Reason for this operation",required:!0})]})]}),e.jsxs(le,{children:[e.jsx(i,{variant:"outline",type:"button",onClick:()=>l(!1),children:"Cancel"}),e.jsx(i,{type:"submit",children:c==="credit"?"Credit Wallet":"Debit Wallet"})]})]})]})})]})}export{Ns as default};
