import{c as g,u as _,J as R,j as e,t,S as m,b as l,C as x,Q as P}from"./app-tu_nxz4H.js";import{D as L,a as M,b as S,e as n}from"./dropdown-menu-XeOzj3G4.js";import{B as v}from"./badge-YbPNhPcJ.js";import{C as D,a as F,b as T,d as q,c as E}from"./card-Bw0vLuEn.js";import{T as V,a as B,b as y,c as H,d as I,e as z}from"./table-ByW5kVZj.js";import{C as K}from"./ClientDashboardLayout-B2cJUFaN.js";import"./pagination-Bz7noSxm.js";import"./input--XoPGThR.js";import"./select-7ggDdyJM.js";import{B as d}from"./button-BZgJU16f.js";import{u as O,f as C,g as $,d as Q}from"./index-mhELI5CK.js";import"./avatar-Br7MV_1H.js";import{E as U}from"./eye-d57NAMzT.js";import{M as G}from"./message-square-BLldBHH5.js";import{U as J}from"./upload-Rp8YJVRx.js";import{R as X}from"./repeat-DFtFnNoH.js";import{P as N}from"./plus-DnTpGEWW.js";import{P as A}from"./package-C35wEl39.js";import{C as b}from"./circle-x-CweIOvyj.js";import{C as u}from"./clock-BbigxC4A.js";import{C as W}from"./credit-card-Bb6y7JVl.js";import"./index-CPefrJt7.js";import"./index-CZg7sQom.js";import"./index-DEJTFC4Z.js";import"./index-CUWVWZD9.js";import"./index-Du654uGJ.js";import"./index-Bzb9Ony0.js";import"./chevron-right-DdsKMi0-.js";import"./AppHeader-B8kkmwh_.js";import"./LanguageDropdown-Czorzu0A.js";import"./loader-circle-CylYfSfh.js";import"./chevron-down-DgvoPxKv.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./skeleton-CNspO5WR.js";import"./index-C4bozPq7.js";import"./search-CMb3RvSH.js";import"./chevron-left-BzXhZBND.js";import"./ellipsis-B0AmQ1B-.js";import"./index-BdQq_4o_.js";import"./index-CvCbp1iq.js";import"./chevron-up-5hDX3Am3.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],Z=g("ellipsis-vertical",Y);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]],se=g("file-search",ee);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],ae=g("quote",re);function Xe({orders:f,filters:ie}){const{t:a,i18n:j}=_();j.language;const{auth:te}=R().props,h={completed:{variant:"success",icon:e.jsx(x,{className:"w-4 h-4 me-1.5"}),label:a("orders.status.completed","Completed")},in_progress:{variant:"info",icon:e.jsx(u,{className:"w-4 h-4 me-1.5 animate-spin"}),label:a("orders.status.in_progress","In Progress")},review:{variant:"warning",icon:e.jsx(se,{className:"w-4 h-4 me-1.5"}),label:a("orders.status.review","In Review")},payment_verified:{variant:"success",icon:e.jsx(W,{className:"w-4 h-4 me-1.5"}),label:a("orders.status.payment_verified","Payment Verified")},pending:{variant:"pending",icon:e.jsx(u,{className:"w-4 h-4 me-1.5"}),label:a("orders.status.pending","Pending")},cancelled:{variant:"error",icon:e.jsx(b,{className:"w-4 h-4 me-1.5"}),label:a("orders.status.cancelled","Cancelled")}},p={verified:{variant:"success",icon:e.jsx(x,{className:"w-4 h-4 me-1.5"}),label:a("orders.paymentStatus.verified","Verified")},pending:{variant:"pending",icon:e.jsx(u,{className:"w-4 h-4 me-1.5"}),label:a("orders.paymentStatus.pending","Pending")},failed:{variant:"error",icon:e.jsx(b,{className:"w-4 h-4 me-1.5"}),label:a("orders.paymentStatus.failed","Failed")}},w=r=>new Intl.NumberFormat(j.language==="ar"?"ar-EG":"en-US",{style:"currency",currency:"SDG",minimumFractionDigits:0}).format(r),k=[{accessorKey:"service",header:a("ordersList.service"),cell:({row:r})=>{var s;return e.jsx(t,{href:route("client.orders.show",r.original.id),className:"hover:text-primary hover:underline",children:((s=r.original.service)==null?void 0:s.title)||"-"})}},{accessorKey:"freelancer",header:a("ordersList.freelancer"),cell:({row:r})=>{var s,i;return e.jsx(t,{href:`/freelancers/${(s=r.original.freelancer)==null?void 0:s.id}`,className:"hover:text-primary hover:underline",children:((i=r.original.freelancer)==null?void 0:i.name)||"-"})}},{accessorKey:"status",header:a("ordersList.status"),cell:({row:r})=>{var s,i,c;return e.jsxs(v,{variant:(s=h[r.original.status])==null?void 0:s.variant,children:[(i=h[r.original.status])==null?void 0:i.icon,(c=h[r.original.status])==null?void 0:c.label]})}},{accessorKey:"total_amount",header:a("ordersList.price"),cell:({row:r})=>w(r.original.total_amount)},{accessorKey:"payment_status",header:a("ordersList.paymentStatus"),cell:({row:r})=>{var s,i,c;return e.jsxs(v,{variant:(s=p[r.original.payment_status])==null?void 0:s.variant,children:[(i=p[r.original.payment_status])==null?void 0:i.icon,(c=p[r.original.payment_status])==null?void 0:c.label]})}},{id:"actions",header:a("common.actions"),cell:({row:r})=>e.jsxs(L,{children:[e.jsx(M,{asChild:!0,children:e.jsxs(d,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:[e.jsx(Z,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:a("ordersList.openMenu","Open menu")})]})}),e.jsxs(S,{className:"rtl align-start",children:[e.jsx(n,{asChild:!0,children:e.jsxs(t,{href:route("client.orders.show",r.original.id),className:"flex items-center",children:[e.jsx(U,{className:"w-4 h-4 me-2"}),a("common.view")]})}),e.jsx(n,{asChild:!0,children:e.jsxs(t,{href:`/chat/${r.original.id}`,className:"flex items-center",children:[e.jsx(G,{className:"w-4 h-4 me-2"}),a("nav.messages")]})}),r.original.status==="pending"&&!r.original.payment_screenshot&&e.jsx(n,{asChild:!0,children:e.jsxs(t,{href:route("client.orders.show",r.original.id)+"#upload-payment",className:"flex items-center",children:[e.jsx(J,{className:"w-4 h-4 me-2"}),a("ordersList.uploadPayment")]})}),r.original.status==="completed"&&e.jsxs(e.Fragment,{children:[r.original.can_review&&e.jsx(n,{asChild:!0,children:e.jsxs(t,{href:route("client.orders.show",r.original.id),className:"flex items-center",children:[e.jsx(ae,{className:"w-4 h-4 me-2"}),a("orders.leaveReview")]})}),r.original.waiting_review&&e.jsx(n,{asChild:!0,children:e.jsx("span",{className:"badge badge-info",children:a("orders.waitingForReview")})})]}),r.original.status==="review"&&e.jsxs(e.Fragment,{children:[e.jsxs(n,{onClick:async()=>{try{await m.post(route("orders.request-revision",r.original.id),{},{onSuccess:s=>{l.success("Revision requested!"),m.reload({only:["orders"]})},onError:s=>{l.error((s==null?void 0:s.message)||"Failed to request revision.")}})}catch(s){l.error((s==null?void 0:s.message)||"Failed to request revision.")}},children:[e.jsx(X,{className:"w-4 h-4 me-2 text-yellow-600"}),a("ordersList.requestRevision","Request Revision")]}),e.jsxs(n,{onClick:async()=>{try{await m.post(`/orders/${r.original.id}/confirm-completion`,{},{onSuccess:s=>{l.success("Order confirmed as completed!"),m.reload({only:["orders"]})},onError:s=>{l.error((s==null?void 0:s.message)||"Failed to confirm completion.")}})}catch(s){l.error((s==null?void 0:s.message)||"Failed to confirm completion.")}},children:[e.jsx(x,{className:"w-4 h-4 me-2 text-green-600"}),a("ordersList.confirmCompletion","Confirm Completion")]})]})]})]})}],o=O({data:f,columns:k,getCoreRowModel:Q(),getPaginationRowModel:$()});return e.jsxs(K,{children:[e.jsx(P,{title:a("nav.orders")}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:a("nav.orders")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:a("ordersList.description")})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(d,{asChild:!0,children:e.jsxs(t,{href:"/services",children:[e.jsx(N,{className:"w-4 h-4 me-2"}),a("ordersList.newOrder")]})})})]}),e.jsxs(D,{children:[e.jsx(F,{children:e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx(T,{children:a("nav.orders")}),e.jsx(q,{})]})})}),e.jsx(E,{children:f.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(V,{children:[e.jsx(B,{children:o.getHeaderGroups().map(r=>e.jsx(y,{children:r.headers.map(s=>e.jsx(H,{children:C(s.column.columnDef.header,s.getContext())},s.id))},r.id))}),e.jsx(I,{children:o.getRowModel().rows.map(r=>e.jsx(y,{className:"hover:bg-muted/50",children:r.getVisibleCells().map(s=>e.jsx(z,{children:C(s.column.columnDef.cell,s.getContext())},s.id))},r.id))})]})}),e.jsxs("div",{className:"flex items-center justify-end py-4",children:[e.jsx(d,{variant:"outline",size:"sm",className:"me-2",onClick:()=>o.previousPage(),disabled:!o.getCanPreviousPage(),children:a("common.previous","Previous")}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>o.nextPage(),disabled:!o.getCanNextPage(),children:a("common.next","Next")})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx(A,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:a("ordersList.emptyTitle")}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:a("ordersList.emptyDescription")}),e.jsx(d,{asChild:!0,children:e.jsxs(t,{href:"/services",children:[e.jsx(N,{className:"w-4 h-4 me-2"}),a("ordersList.newOrder")]})})]})})]})]})}export{Xe as default};
