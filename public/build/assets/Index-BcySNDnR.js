import{u as ee,a as se,r as n,j as e,t as _,C as E,Q as ae,b as Q,S as te}from"./app-tu_nxz4H.js";import{B as l}from"./button-BZgJU16f.js";import{C as c,c as m,a as re,b as le}from"./card-Bw0vLuEn.js";import{A as ie}from"./AdminLayout-Dmogl9Wd.js";import{T as ne,a as oe,b as w,c as de,d as ce,e as R}from"./table-ByW5kVZj.js";import{D as me,a as xe,b as he,c as ge,d as O,e as M}from"./dropdown-menu-XeOzj3G4.js";import{S as A,a as I,b as T,c as L,d as x}from"./select-7ggDdyJM.js";import{I as ue}from"./input--XoPGThR.js";import{B as D}from"./badge-YbPNhPcJ.js";import{C as X}from"./checkbox-DGy5fYDr.js";import{c as pe,u as je,f as q,g as fe,a as Ne,b as ve,d as we}from"./index-mhELI5CK.js";import{U as G}from"./user-BTZAhoSQ.js";import{A as u}from"./arrow-up-down-B6ZoVety.js";import{S as J}from"./shield-Lne4-C57.js";import{C as Ce}from"./chevron-down-DgvoPxKv.js";import{P as be}from"./plus-DnTpGEWW.js";import{S as Se}from"./search-CMb3RvSH.js";import{C as ye}from"./circle-x-CweIOvyj.js";import{C as ke,a as Pe}from"./chevron-last-DHuAoB66.js";import{C as Re}from"./chevron-left-BzXhZBND.js";import{C as Me}from"./chevron-right-DdsKMi0-.js";import"./AppHeader-B8kkmwh_.js";import"./LanguageDropdown-Czorzu0A.js";import"./loader-circle-CylYfSfh.js";import"./avatar-Br7MV_1H.js";import"./index-CPefrJt7.js";import"./index-CUWVWZD9.js";import"./index-CZg7sQom.js";import"./index-Du654uGJ.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./index-DEJTFC4Z.js";import"./index-Bzb9Ony0.js";import"./skeleton-CNspO5WR.js";import"./index-C4bozPq7.js";import"./briefcase-uRVTc7Lp.js";import"./file-text-CsIm62FH.js";import"./credit-card-Bb6y7JVl.js";import"./wallet-df-tNZSa.js";import"./users-CR2iJthz.js";import"./index-BdQq_4o_.js";import"./index-CvCbp1iq.js";import"./chevron-up-5hDX3Am3.js";const h=pe();function vs({users:g=[],stats:p={},filters:C={},roles:b=[]}){var H;const{t:a}=ee(),{isRTL:i}=se(),j=Array.isArray(g)?g:(g==null?void 0:g.data)||[],K=!j||j.length===0,[W,F]=n.useState([]),[Y,Z]=n.useState({pageIndex:0,pageSize:10}),[f,S]=n.useState({}),[o,U]=n.useState(C.search||""),[N,$]=n.useState(C.role||"all"),[v,B]=n.useState(C.status||"all"),y=s=>{const t=Object.keys(f).map(d=>k[d].id);if(t.length===0){Q.error(a("admin.users.noUsersSelected"));return}te.post(route("admin.users.bulkAction"),{action:s,ids:t,preserveScroll:!0,onSuccess:()=>{Q.success(a("admin.users.bulkActionSuccess")),S({})}})},k=n.useMemo(()=>{let s=j;return o&&(s=s.filter(t=>{var d,V,z;return((d=t.name)==null?void 0:d.toLowerCase().includes(o.toLowerCase()))||((V=t.email)==null?void 0:V.toLowerCase().includes(o.toLowerCase()))||((z=t.phone)==null?void 0:z.toLowerCase().includes(o.toLowerCase()))})),N!=="all"&&(s=s.filter(t=>Array.isArray(t.roles)&&t.roles.some(d=>d.role===N))),v!=="all"&&(s=s.filter(t=>v==="active"?t.is_active:!t.is_active)),s},[j,o,N,v]),P=n.useMemo(()=>[h.display({id:"select",header:({table:s})=>e.jsx(X,{checked:s.getIsAllPageRowsSelected(),onCheckedChange:t=>s.toggleAllPageRowsSelected(!!t),"aria-label":"Select all",className:"translate-y-[2px]"}),cell:({row:s})=>e.jsx(X,{checked:s.getIsSelected(),onCheckedChange:t=>s.toggleSelected(!!t),"aria-label":"Select row",className:"translate-y-[2px]"}),size:40}),h.accessor("name",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),a("admin.users.table.name")," ",e.jsx(u,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx(_,{href:route("admin.users.show",s.original.id),className:"font-semibold hover:underline",children:s.original.name})}),h.accessor("email",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[a("admin.users.table.email")," ",e.jsx(u,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>s.original.email}),h.accessor("phone",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[a("admin.users.table.phone")," ",e.jsx(u,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>s.original.phone||"-"}),h.accessor("roles",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),a("admin.users.table.roles")," ",e.jsx(u,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>e.jsx("div",{className:"flex flex-wrap gap-1",children:Array.isArray(s.original.roles)&&s.original.roles.map(t=>e.jsx(D,{variant:t.role==="admin"?"default":"secondary",children:a(`admin.users.roles.${t.role}`)},t.role))})}),h.accessor("is_active",{header:({column:s})=>e.jsxs(l,{variant:"ghost",onClick:()=>s.toggleSorting(s.getIsSorted()==="asc"),className:"h-8 p-0 font-semibold",children:[e.jsx(E,{className:"mr-2 h-4 w-4"}),a("admin.users.table.status")," ",e.jsx(u,{className:"ml-2 h-4 w-4"})]}),cell:({row:s})=>s.original.is_active?e.jsx(D,{variant:"success",children:a("admin.users.status.active")}):e.jsx(D,{variant:"destructive",children:a("admin.users.status.inactive")})})],[a,i]),r=je({data:k,columns:P,getCoreRowModel:we(),getFilteredRowModel:ve(),getSortedRowModel:Ne(),getPaginationRowModel:fe(),onSortingChange:F,onRowSelectionChange:S,onPaginationChange:Z,state:{sorting:W,rowSelection:f,pagination:Y}});return e.jsxs(ie,{children:[e.jsx(ae,{title:a("admin.users.title")}),e.jsxs("div",{className:"p-6 space-y-8",children:[e.jsxs("div",{className:"mb-8 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:a("admin.users.title")}),e.jsx("p",{className:"mt-2 text-muted-foreground",children:a("admin.users.description")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[Object.keys(f).length>0&&e.jsxs(me,{children:[e.jsx(xe,{asChild:!0,children:e.jsxs(l,{variant:"outline",className:"flex items-center gap-2",children:[Object.keys(f).length," ",a("admin.users.selected"),e.jsx(Ce,{className:"h-4 w-4"})]})}),e.jsxs(he,{children:[e.jsx(ge,{children:a("admin.users.bulkActions")}),e.jsx(O,{}),e.jsx(M,{onClick:()=>y("activate"),children:a("admin.users.actions.activate")}),e.jsx(M,{onClick:()=>y("deactivate"),children:a("admin.users.actions.deactivate")}),e.jsx(O,{}),e.jsx(M,{onClick:()=>y("delete"),className:"text-red-600 dark:text-red-400",children:a("common.delete")})]})]}),e.jsx(l,{asChild:!0,className:"flex items-center gap-2",children:e.jsxs(_,{href:route("admin.users.create"),children:[e.jsx(be,{className:"h-4 w-4"}),a("admin.users.addNew")]})})]})]}),e.jsx(c,{className:"mb-6",children:e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"relative flex-1 max-w-sm",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(ue,{placeholder:a("admin.users.searchPlaceholder"),value:o,onChange:s=>U(s.target.value),className:"ps-10"})]}),e.jsxs(A,{value:N,onValueChange:$,children:[e.jsx(I,{className:"w-40",children:e.jsx(T,{placeholder:a("admin.users.filters.role")})}),e.jsxs(L,{children:[e.jsx(x,{value:"all",children:a("admin.users.filters.allRoles")}),(Array.isArray(b)?b.data||b:[]).map(s=>e.jsx(x,{value:s.role||s,children:a(`admin.users.roles.${s.role||s}`)},s.role||s))]})]}),e.jsxs(A,{value:v,onValueChange:B,children:[e.jsx(I,{className:"w-40",children:e.jsx(T,{placeholder:a("admin.users.filters.status")})}),e.jsxs(L,{children:[e.jsx(x,{value:"all",children:a("admin.users.filters.allStatuses")}),e.jsx(x,{value:"active",children:a("admin.users.filters.active")}),e.jsx(x,{value:"inactive",children:a("admin.users.filters.inactive")})]})]})]}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>{U(""),$("all"),B("all"),F([]),S({})},children:a("admin.users.resetFilters")})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(c,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("admin.users.totalUsers")}),e.jsx("h3",{className:"text-2xl font-bold",children:p.total||0})]}),e.jsx("div",{className:"rounded-lg bg-primary/10 p-3",children:e.jsx(G,{className:"h-6 w-6 text-primary"})})]})})}),e.jsx(c,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("admin.users.activeUsers")}),e.jsx("h3",{className:"text-2xl font-bold",children:p.active||0})]}),e.jsx("div",{className:"rounded-lg bg-green-100 dark:bg-green-900/50 p-3",children:e.jsx(E,{className:"h-6 w-6 text-green-600 dark:text-green-400"})})]})})}),e.jsx(c,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("admin.users.inactiveUsers")}),e.jsx("h3",{className:"text-2xl font-bold",children:p.inactive||0})]}),e.jsx("div",{className:"rounded-lg bg-red-100 dark:bg-red-900/50 p-3",children:e.jsx(ye,{className:"h-6 w-6 text-red-600 dark:text-red-400"})})]})})}),e.jsx(c,{children:e.jsx(m,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:a("admin.users.adminUsers")}),e.jsx("h3",{className:"text-2xl font-bold",children:p.admins||0})]}),e.jsx("div",{className:"rounded-lg bg-purple-100 dark:bg-purple-900/50 p-3",children:e.jsx(J,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})})]})})})]}),e.jsxs(c,{children:[e.jsx(re,{children:e.jsxs(le,{className:"flex items-center justify-between",children:[e.jsx("span",{children:a("admin.users.usersList")}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.getFilteredRowModel().rows.length," ",a("admin.users.results")]})]})}),e.jsxs(m,{children:[e.jsx("div",{className:"overflow-x-auto rounded-lg border border-border",children:e.jsxs(ne,{children:[e.jsx(oe,{children:r.getHeaderGroups().map(s=>e.jsx(w,{children:s.headers.map(t=>e.jsx(de,{children:t.isPlaceholder?null:q(t.column.columnDef.header,t.getContext())},t.id))},s.id))}),e.jsx(ce,{children:K?e.jsx(w,{children:e.jsx(R,{colSpan:P.length,className:"h-24 text-center",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:a("admin.users.loading")})]})})}):(H=r.getRowModel().rows)!=null&&H.length?r.getRowModel().rows.map(s=>e.jsx(w,{"data-state":s.getIsSelected()&&"selected",children:s.getVisibleCells().map(t=>e.jsx(R,{children:q(t.column.columnDef.cell,t.getContext())},t.id))},s.id)):e.jsx(w,{children:e.jsx(R,{colSpan:P.length,className:"h-24 text-center",children:a("admin.users.noUsersFound")})})})]})}),e.jsxs("div",{className:"flex items-center justify-between space-x-2 py-4",children:[e.jsxs("div",{className:"flex-1 text-sm text-muted-foreground",children:[a("admin.users.pagination.showing")," ",r.getFilteredRowModel().rows.length," ",a("admin.users.pagination.of")," ",k.length," ",a("admin.users.pagination.results")]}),e.jsxs("div",{className:`flex items-center ${i?"space-x-reverse space-x-6 lg:space-x-reverse lg:space-x-8":"space-x-6 lg:space-x-8"}`,children:[e.jsxs("div",{className:`flex items-center ${i?"space-x-reverse space-x-2":"space-x-2"}`,children:[e.jsx("p",{className:"text-sm font-medium",children:a("admin.users.pagination.rowsPerPage")}),e.jsxs(A,{value:`${r.getState().pagination.pageSize}`,onValueChange:s=>{r.setPageSize(Number(s))},children:[e.jsx(I,{className:"h-8 w-[70px]",children:e.jsx(T,{placeholder:r.getState().pagination.pageSize})}),e.jsx(L,{side:"top",children:[10,20,30,40,50].map(s=>e.jsx(x,{value:`${s}`,children:s},s))})]})]}),e.jsxs("div",{className:"flex w-[100px] items-center justify-center text-sm font-medium",children:[a("admin.users.pagination.page")," ",r.getState().pagination.pageIndex+1," ",a("admin.users.pagination.of")," ",r.getPageCount()]}),e.jsxs("div",{className:`flex items-center ${i?"space-x-reverse space-x-2":"space-x-2"}`,children:[e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>r.setPageIndex(0),disabled:!r.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.users.pagination.goToFirst")}),e.jsx(ke,{className:`h-4 w-4  ${i?"rotate-180":""}`})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>r.previousPage(),disabled:!r.getCanPreviousPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.users.pagination.goToPrevious")}),e.jsx(Re,{className:`h-4 w-4 ${i?"rotate-180":""}`})]}),e.jsxs(l,{variant:"outline",className:"h-8 w-8 p-0",onClick:()=>r.nextPage(),disabled:!r.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.users.pagination.goToNext")}),e.jsx(Me,{className:`h-4 w-4 ${i?"rotate-180":""}`})]}),e.jsxs(l,{variant:"outline",className:"hidden h-8 w-8 p-0 lg:flex",onClick:()=>r.setPageIndex(r.getPageCount()-1),disabled:!r.getCanNextPage(),children:[e.jsx("span",{className:"sr-only",children:a("admin.users.pagination.goToLast")}),e.jsx(Pe,{className:`h-4 w-4  ${i?"rotate-180":""}`})]})]})]})]})]})]})]})]})}export{vs as default};
