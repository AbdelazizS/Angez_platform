import{u as X,J as K,r as _,x as V,j as e,Q as W,t as d,C as S}from"./app-tu_nxz4H.js";import"./dropdown-menu-XeOzj3G4.js";import{B as r}from"./button-BZgJU16f.js";import{C as m,a as c,b as o,c as x,d as Y}from"./card-Bw0vLuEn.js";import{I as R}from"./input--XoPGThR.js";import{C as Z}from"./ClientDashboardLayout-B2cJUFaN.js";import{R as ee,a as se}from"./ReviewCard-DPuyNaH6.js";import{L as F}from"./label-rORxKIBW.js";import{C as L}from"./chevron-right-DdsKMi0-.js";import{M as ae}from"./message-square-BLldBHH5.js";import{C as P}from"./credit-card-Bb6y7JVl.js";import{F as T}from"./file-text-CsIm62FH.js";import{T as U}from"./triangle-alert-Cpf-AceC.js";import{L as q}from"./loader-circle-CylYfSfh.js";import{U as te}from"./upload-Rp8YJVRx.js";import{C as h}from"./clock-BbigxC4A.js";import{C as I}from"./circle-x-CweIOvyj.js";import"./index-CPefrJt7.js";import"./index-CZg7sQom.js";import"./index-DEJTFC4Z.js";import"./index-CUWVWZD9.js";import"./index-Du654uGJ.js";import"./index-Bzb9Ony0.js";import"./AppHeader-B8kkmwh_.js";import"./LanguageDropdown-Czorzu0A.js";import"./chevron-down-DgvoPxKv.js";import"./avatar-Br7MV_1H.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./skeleton-CNspO5WR.js";import"./index-C4bozPq7.js";import"./search-CMb3RvSH.js";import"./package-C35wEl39.js";import"./textarea-BFctAIp6.js";import"./index.esm-D4L61ild.js";import"./star-BhuApNjd.js";function Oe({order:a}){var g,N,b,v,w,y,C,k,D;const{t:s,i18n:B}=X(),{auth:re}=K().props,[$,p]=_.useState(a.status==="pending"&&!a.payment_screenshot),A=_.useRef(),{data:E,setData:u,post:M,processing:j,reset:O}=V({transaction_ref:"",payment_screenshot:null}),i={completed:{variant:"success",icon:e.jsx(S,{className:"w-4 h-4"}),label:s("orders.status.completed"),className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400"},in_progress:{variant:"info",icon:e.jsx(q,{className:"w-4 h-4 animate-spin"}),label:s("orders.status.in_progress"),className:"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"},review:{variant:"warning",icon:e.jsx(T,{className:"w-4 h-4"}),label:s("orders.status.review"),className:"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400"},payment_verified:{variant:"success",icon:e.jsx(P,{className:"w-4 h-4"}),label:s("orders.status.payment_verified"),className:"bg-purple-50 text-purple-700 dark:bg-purple-900/20 dark:text-purple-400"},pending:{variant:"pending",icon:e.jsx(h,{className:"w-4 h-4"}),label:s("orders.status.pending"),className:"bg-gray-50 text-gray-700 dark:bg-gray-800 dark:text-gray-300"},cancelled:{variant:"destructive",icon:e.jsx(I,{className:"w-4 h-4"}),label:s("orders.status.cancelled"),className:"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}},l={verified:{variant:"success",icon:e.jsx(S,{className:"w-4 h-4"}),label:s("orders.paymentStatus.verified"),className:"bg-emerald-50 text-emerald-700 dark:bg-emerald-900/20 dark:text-emerald-400"},pending:{variant:"pending",icon:e.jsx(h,{className:"w-4 h-4"}),label:s("orders.paymentStatus.pending"),className:"bg-amber-50 text-amber-700 dark:bg-amber-900/20 dark:text-amber-400"},failed:{variant:"destructive",icon:e.jsx(I,{className:"w-4 h-4"}),label:s("orders.paymentStatus.failed"),className:"bg-red-50 text-red-700 dark:bg-red-900/20 dark:text-red-400"}},Q=t=>{u("payment_screenshot",t.target.files[0])},z=t=>{t.preventDefault(),M(route("client.orders.uploadPayment",a.id),{onSuccess:()=>{O(),p(!1)}})},f=t=>new Date(t).toLocaleDateString(B.language,{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),n=({title:t,value:G,icon:H,className:J=""})=>e.jsxs("div",{className:`flex items-center p-4 rounded-lg border ${J}`,children:[e.jsx("div",{className:"flex-shrink-0 p-2 rounded-full bg-opacity-20",children:H}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:t}),e.jsx("p",{className:"text-lg font-semibold",children:G})]})]});return e.jsxs(Z,{children:[e.jsx(W,{title:s("ordersDetails.title")}),e.jsxs("div",{className:"flex flex-col space-y-2 mb-6",children:[e.jsxs("nav",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(d,{href:"/client/dashboard",className:"hover:text-primary",children:s("dashboard.title")}),e.jsx(L,{className:"w-4 h-4 mx-2"}),e.jsx(d,{href:"/client/orders",className:"hover:text-primary",children:s("nav.orders")}),e.jsx(L,{className:"w-4 h-4 mx-2"}),e.jsxs("span",{className:"text-foreground",children:["#",a.id]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:s("ordersDetails.title")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:s("ordersDetails.description")})]}),e.jsx("div",{className:"flex items-center gap-2",children:a.can_chat&&e.jsx(r,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(d,{href:`/chat?order=${a.id}`,children:[e.jsx(ae,{className:"w-4 h-4 me-2"}),s("nav.messages")]})})})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3 mb-6",children:[e.jsx(n,{title:s("ordersDetails.status"),value:(g=i[a.status])==null?void 0:g.label,icon:(N=i[a.status])==null?void 0:N.icon,className:(b=i[a.status])==null?void 0:b.className}),e.jsx(n,{title:s("ordersDetails.paymentStatus"),value:(v=l[a.payment_status])==null?void 0:v.label,icon:(w=l[a.payment_status])==null?void 0:w.icon,className:(y=l[a.payment_status])==null?void 0:y.className}),e.jsx(n,{title:s("ordersDetails.totalAmount"),value:`${(C=a.total_amount)==null?void 0:C.toLocaleString()} SDG`,icon:e.jsx(P,{className:"w-4 h-4"}),className:"bg-blue-50 text-blue-700 dark:bg-blue-900/20 dark:text-blue-400"})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[e.jsxs(m,{className:"md:col-span-2",children:[e.jsx(c,{children:e.jsx(o,{children:s("ordersDetails.orderDetails")})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:s("services.service")}),e.jsx("p",{className:"font-medium mt-1",children:((k=a.service)==null?void 0:k.title)||"-"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:s("services.freelancer")}),e.jsx("p",{className:"font-medium mt-1",children:((D=a.freelancer)==null?void 0:D.name)||"-"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:s("ordersDetails.placedOn")}),e.jsx("p",{className:"font-medium mt-1",children:f(a.created_at)})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:s("ordersDetails.dueDate")}),e.jsx("p",{className:"font-medium mt-1",children:a.due_date?f(a.due_date):"-"})]})]}),e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground mb-2",children:s("ordersDetails.paymentProof")}),a.payment_screenshot?e.jsx(r,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:a.payment_screenshot,target:"_blank",rel:"noopener noreferrer",className:"flex items-center",children:[e.jsx(T,{className:"w-4 h-4 me-2"}),s("ordersDetails.viewProof")]})}):e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(U,{className:"w-4 h-4 me-2"}),s("ordersDetails.notUploaded")]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[a.status==="pending"&&!a.payment_screenshot&&e.jsxs(m,{children:[e.jsxs(c,{children:[e.jsx(o,{className:"text-lg",children:s("ordersDetails.paymentRequired")}),e.jsx(Y,{children:s("ordersDetails.uploadPaymentDescription")})]}),e.jsx(x,{children:$?e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"transaction_ref",children:s("ordersDetails.transactionRef")}),e.jsx(R,{id:"transaction_ref",value:E.transaction_ref,onChange:t=>u("transaction_ref",t.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(F,{htmlFor:"payment_screenshot",children:s("ordersDetails.paymentScreenshot")}),e.jsx(R,{id:"payment_screenshot",type:"file",accept:"image/*",ref:A,onChange:Q,required:!0})]}),e.jsx(r,{type:"submit",disabled:j,className:"w-full",children:j?e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"w-4 h-4 me-2 animate-spin"}),s("ordersConfirmation.uploading")]}):s("ordersDetails.uploadProof")})]}):e.jsxs(r,{onClick:()=>p(!0),className:"w-full",children:[e.jsx(te,{className:"w-4 h-4 me-2"}),s("ordersDetails.uploadPayment")]})})]}),e.jsxs(m,{children:[e.jsx(c,{children:e.jsx(o,{className:"text-lg",children:s("reviews.title")})}),e.jsxs(x,{children:[!a.can_chat&&e.jsxs("div",{className:"flex items-start p-4 rounded-lg bg-yellow-50 dark:bg-yellow-900/20 text-yellow-700 dark:text-yellow-400",children:[e.jsx(U,{className:"w-5 h-5 mt-0.5 me-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s("orders.chatClosedTitle")}),e.jsx("p",{className:"text-sm mt-1",children:s("orders.chatClosed")})]})]}),a.can_review&&e.jsx(ee,{orderId:a.id,onSuccess:()=>window.location.reload()}),a.waiting_review&&e.jsxs("div",{className:"flex items-start p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-700 dark:text-blue-400",children:[e.jsx(h,{className:"w-5 h-5 mt-0.5 me-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:s("orders.reviewPendingTitle")}),e.jsx("p",{className:"text-sm mt-1",children:s("orders.waitingForReview")})]})]}),a.review&&e.jsx(se,{review:a.review})]})]})]})]})]})}export{Oe as default};
