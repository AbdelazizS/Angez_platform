import{u as P,r as f,j as e,Q as T,S as A}from"./app-tu_nxz4H.js";import{I as d}from"./input--XoPGThR.js";import{S as L,a as k,b as I,c as R,d as V}from"./select-7ggDdyJM.js";import{C as $}from"./checkbox-DGy5fYDr.js";import{B}from"./button-BZgJU16f.js";import{F as O,a as o,b as i,c as m,d as n,e as l}from"./form-DlaR5nxW.js";import{u as Q}from"./index.esm-D4L61ild.js";import{o as q,b as z,s as c,l as M,a as U}from"./types-BkI8Fffz.js";import{A as D}from"./AdminLayout-Dmogl9Wd.js";import{E as g}from"./eye-off-E7JYF_do.js";import{E as y}from"./eye-d57NAMzT.js";import{L as G}from"./loader-circle-CylYfSfh.js";import"./index-BdQq_4o_.js";import"./index-CPefrJt7.js";import"./index-DEJTFC4Z.js";import"./index-CUWVWZD9.js";import"./index-CZg7sQom.js";import"./index-Du654uGJ.js";import"./index-CvCbp1iq.js";import"./index-C4bozPq7.js";import"./chevron-down-DgvoPxKv.js";import"./chevron-up-5hDX3Am3.js";import"./index-Bzb9Ony0.js";import"./label-rORxKIBW.js";import"./AppHeader-B8kkmwh_.js";import"./dropdown-menu-XeOzj3G4.js";import"./chevron-right-DdsKMi0-.js";import"./LanguageDropdown-Czorzu0A.js";import"./avatar-Br7MV_1H.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./skeleton-CNspO5WR.js";import"./shield-Lne4-C57.js";import"./briefcase-uRVTc7Lp.js";import"./file-text-CsIm62FH.js";import"./credit-card-Bb6y7JVl.js";import"./wallet-df-tNZSa.js";import"./users-CR2iJthz.js";function ke({roles:w=[]}){const{t:s,i18n:N}=P(),p=(N.language||(typeof window<"u"?document.documentElement.lang:"en"))==="ar",[u,S]=f.useState(!1),[h,C]=f.useState(!1),[v,x]=f.useState(!1),_=q({name:c().min(2,s("admin.users.create.validation.name.min")).max(255,s("admin.users.create.validation.name.max")),email:c().email(s("admin.users.create.validation.email.invalid")).max(255,s("admin.users.create.validation.email.max")),phone:c().max(20,s("admin.users.create.validation.phone.max")).optional().or(M("")),password:c().min(8,s("admin.users.create.validation.password.min")),password_confirmation:c(),role:c().min(1,s("admin.users.create.validation.role.required")),is_active:z().optional()}).refine(r=>r.password===r.password_confirmation,{message:s("admin.users.create.validation.password_confirmation.mismatch"),path:["password_confirmation"]}),a=Q({resolver:U(_),defaultValues:{name:"",email:"",phone:"",password:"",password_confirmation:"",role:"",is_active:!0}}),E=async r=>{x(!0),A.post(route("admin.users.store"),r,{onSuccess:()=>{a.reset(),x(!1)},onError:t=>{Object.entries(t).forEach(([b,j])=>{Array.isArray(j)?a.setError(b,{type:"server",message:j[0]}):a.setError(b,{type:"server",message:j})}),x(!1)},onFinish:()=>x(!1)})},F=Array.isArray(w)?w.map(r=>typeof r=="string"?r:r.role||r):[];return e.jsxs(D,{children:[e.jsx(T,{title:s("admin.users.create.title")}),e.jsxs("div",{className:"max-w-xl mx-auto py-10",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6 text-foreground",children:s("admin.users.create.title")}),e.jsx(O,{...a,children:e.jsxs("form",{onSubmit:a.handleSubmit(E),className:"space-y-6",children:[e.jsx(o,{control:a.control,name:"name",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:s("admin.users.create.fields.name")}),e.jsx(n,{children:e.jsx(d,{placeholder:s("admin.users.create.fields.namePlaceholder"),...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:a.control,name:"email",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:s("admin.users.create.fields.email")}),e.jsx(n,{children:e.jsx(d,{type:"email",placeholder:s("admin.users.create.fields.emailPlaceholder"),...r})}),e.jsx(l,{})]})}),e.jsx(o,{control:a.control,name:"phone",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:s("admin.users.create.fields.phone")}),e.jsx(n,{children:e.jsx(d,{type:"tel",placeholder:s("admin.users.create.fields.phonePlaceholder"),...r})}),e.jsx(l,{})]})}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(o,{control:a.control,name:"password",render:({field:r})=>e.jsxs(i,{className:"w-1/2",children:[e.jsx(m,{children:s("admin.users.create.fields.password")}),e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{dir:p?"rtl":"ltr",type:u?"text":"password",placeholder:"••••••••",autoComplete:"new-password",className:"pr-10 rtl:pl-10 rtl:pr-3",...r}),e.jsx("button",{type:"button",tabIndex:-1,"aria-label":s(u?"admin.users.create.hide":"admin.users.create.show"),onClick:()=>S(t=>!t),className:`absolute top-1/2 -translate-y-1/2 ${p?"left-2":"right-2"} text-muted-foreground focus:outline-none`,children:u?e.jsx(g,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]})}),e.jsx(l,{})]})}),e.jsx(o,{control:a.control,name:"password_confirmation",render:({field:r})=>e.jsxs(i,{className:"w-1/2",children:[e.jsx(m,{children:s("admin.users.create.fields.password_confirmation")}),e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(d,{type:h?"text":"password",placeholder:"••••••••",autoComplete:"new-password",className:"pr-10 rtl:pl-10 rtl:pr-3",dir:p?"rtl":"ltr",...r}),e.jsx("button",{type:"button",tabIndex:-1,"aria-label":s(h?"admin.users.create.hide":"admin.users.create.show"),onClick:()=>C(t=>!t),className:`absolute top-1/2 -translate-y-1/2 ${p?"left-2":"right-2"} text-muted-foreground focus:outline-none`,children:h?e.jsx(g,{className:"w-5 h-5"}):e.jsx(y,{className:"w-5 h-5"})})]})}),e.jsx(l,{})]})})]}),e.jsx(o,{control:a.control,name:"role",render:({field:r})=>e.jsxs(i,{children:[e.jsx(m,{children:s("admin.users.create.fields.role")}),e.jsx(n,{children:e.jsxs(L,{value:r.value,onValueChange:r.onChange,children:[e.jsx(k,{className:"rtl",children:e.jsx(I,{placeholder:s("admin.users.create.fields.rolePlaceholder")})}),e.jsx(R,{className:"rtl",children:F.map(t=>e.jsx(V,{value:t,children:s(`admin.users.roles.${t}`)},t))})]})}),e.jsx(l,{})]})}),e.jsx(o,{control:a.control,name:"is_active",render:({field:r})=>e.jsxs(i,{className:"flex items-center gap-2",children:[e.jsx(n,{children:e.jsx($,{checked:r.value,onCheckedChange:r.onChange,id:"is_active"})}),e.jsx("label",{htmlFor:"is_active",className:"text-sm text-muted-foreground",children:s("admin.users.create.fields.is_active")}),e.jsx(l,{})]})}),e.jsx("div",{className:"pt-4",children:e.jsx(B,{className:"w-full py-3 text-base font-semibold bg-[hsl(var(--primary))] text-[hsl(var(--primary-foreground))] hover:opacity-90",disabled:a.formState.isSubmitting||v,type:"submit",children:v?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 animate-spin"}),s("admin.users.create.creating")]}):a.formState.isSubmitting?s("admin.users.create.creating"):s("admin.users.create.button")})}),e.jsx("div",{className:"text-center text-sm text-muted-foreground mt-2 text-primary hover:underline font-medium",children:s("admin.users.create.backToList")})]})})]})]})}export{ke as default};
