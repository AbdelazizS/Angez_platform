import{c as D,u as z,r as c,j as e,Q as B,t as E}from"./app-tu_nxz4H.js";import{I as P}from"./input--XoPGThR.js";import{A as Q,a as U,b as R}from"./avatar-Br7MV_1H.js";import{B as x}from"./badge-YbPNhPcJ.js";import{S as u}from"./skeleton-CNspO5WR.js";import{s as Y}from"./AppHeader-B8kkmwh_.js";import{C as q}from"./ClientDashboardLayout-B2cJUFaN.js";import{F as G}from"./FreelancerDashboardLayout-Drmnvfzb.js";import{A as H}from"./AdminLayout-Dmogl9Wd.js";import{S as J}from"./search-CMb3RvSH.js";import{M as K}from"./message-circle-DD6Uaeig.js";import{I as V}from"./image-C3eGslzt.js";import{F as W}from"./file-text-CsIm62FH.js";import{C as X}from"./circle-slash-DazBCOcu.js";import{C as Z}from"./circle-alert-DXhyxmSK.js";import{C as ee}from"./clock-BbigxC4A.js";import"./button-BZgJU16f.js";import"./index-CPefrJt7.js";import"./index-CUWVWZD9.js";import"./index-CZg7sQom.js";import"./index-Du654uGJ.js";import"./dropdown-menu-XeOzj3G4.js";import"./index-DEJTFC4Z.js";import"./index-Bzb9Ony0.js";import"./chevron-right-DdsKMi0-.js";import"./LanguageDropdown-Czorzu0A.js";import"./loader-circle-CylYfSfh.js";import"./chevron-down-DgvoPxKv.js";import"./log-out-C_P4AYsR.js";import"./separator-C-d7tlPr.js";import"./sheet-2K7jSFhM.js";import"./index-C4bozPq7.js";import"./package-C35wEl39.js";import"./message-square-BLldBHH5.js";import"./wallet-df-tNZSa.js";import"./shield-Lne4-C57.js";import"./briefcase-uRVTc7Lp.js";import"./credit-card-Bb6y7JVl.js";import"./users-CR2iJthz.js";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],A=D("circle-check",se);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]],re=D("circle-dot",te),m={pending:{icon:e.jsx(re,{className:"w-4 h-4 text-yellow-500"}),color:"bg-yellow-100 text-yellow-800"},payment_verified:{icon:e.jsx(A,{className:"w-4 h-4 text-blue-500"}),color:"bg-blue-100 text-blue-800"},in_progress:{icon:e.jsx(ee,{className:"w-4 h-4 text-primary"}),color:"bg-primary/10 text-primary"},review:{icon:e.jsx(Z,{className:"w-4 h-4 text-purple-500"}),color:"bg-purple-100 text-purple-800"},completed:{icon:e.jsx(A,{className:"w-4 h-4 text-green-500"}),color:"bg-green-100 text-green-800"},cancelled:{icon:e.jsx(X,{className:"w-4 h-4 text-red-500"}),color:"bg-red-100 text-red-800"}};function Ye({auth:h,chats:g=[]}){var b;const{t:r}=z(),[o,I]=c.useState(""),[d,F]=c.useState("all"),[M,ae]=c.useState(!1),j=(b=h==null?void 0:h.user)==null?void 0:b.role,p=j==="client",f=j==="freelancer",n=c.useMemo(()=>g.map(s=>{console.log(s);let t,a;p&&s.freelancer?(t=s.freelancer,a="freelancer"):f&&s.client?(t=s.client,a="client"):(t=s.freelancer||s.client||{name:"Unknown User"},a=s.freelancer?"freelancer":s.client?"client":"unknown");const l=s.order_status||"pending",i=m[l]||m.pending;return{id:s.order_id,order_id:s.order_id,order_number:s.order_number,order_status:l,other_user:{...t,role:a},last_message:s.last_message,unread_count:s.unread_count,statusInfo:i}}),[g,p,f]),N=c.useMemo(()=>{let s=n;return o.trim()&&(s=s.filter(t=>{var a,l,i;return((l=(a=t.other_user)==null?void 0:a.name)==null?void 0:l.toLowerCase().includes(o.toLowerCase()))||((i=t.order_number)==null?void 0:i.toString().includes(o))})),d!=="all"&&(s=s.filter(t=>t.order_status===d)),s},[o,d,n]),$=s=>{if(!s)return"";const t=new Date(s),a=new Date;return t.toDateString()===a.toDateString()?t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):t.toLocaleDateString([],{month:"short",day:"numeric"})},O=c.useMemo(()=>{const s={all:n.length};return Object.keys(m).forEach(t=>{s[t]=n.filter(a=>a.order_status===t).length}),s},[n]),T=p?q:f?G:H;return e.jsxs(T,{noPadding:!0,children:[e.jsx(B,{title:r("chatList.title")}),e.jsxs("div",{className:"flex h-full bg-background",children:[e.jsx("div",{className:"hidden md:block w-64 p-4 border-r bg-background",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"px-2",children:[e.jsx("h2",{className:"text-lg font-semibold",children:r("chatList.orderStatus")}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r("chatList.filterByOrderStatus")})]}),e.jsx("div",{className:"space-y-1",children:["all",...Object.keys(m)].map(s=>{var t;return e.jsxs("button",{onClick:()=>F(s),className:`w-full flex items-center justify-between px-3 py-2 rounded-md text-left ${d===s?"bg-accent font-medium":"hover:bg-accent/50"}`,children:[e.jsxs("div",{className:"flex items-center",children:[s!=="all"&&e.jsx("span",{className:"me-2",children:(t=m[s])==null?void 0:t.icon}),e.jsx("span",{className:"capitalize",children:r(s==="all"?"chatList.allOrders":`orders.status.${s}`)})]}),e.jsx(x,{variant:"outline",className:"px-2 py-0.5 text-xs",children:O[s]})]},s)})})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b bg-background",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:r("chatList.title")}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r("chatList.subtitle")})]})}),e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(P,{placeholder:r("chatList.searchPlaceholder"),value:o,onChange:s=>I(s.target.value),className:"pl-10"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:M?e.jsx("div",{className:"space-y-2 p-4",children:Array.from({length:6}).map((s,t)=>e.jsx("div",{className:"p-4 bg-background rounded-lg border",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(u,{className:"h-12 w-12 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(u,{className:"h-4 w-[160px]"}),e.jsx(u,{className:"h-4 w-[60px]"})]}),e.jsx(u,{className:"h-3 w-[200px]"})]})]})},t))}):N.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8 bg-white",children:[e.jsx(K,{className:"w-12 h-12 text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium",children:r("chatList.noConversations")}),e.jsx("p",{className:"text-muted-foreground mt-1",children:r(o?"chatList.tryDifferentSearch":"chatList.emptyState")})]}):e.jsx("div",{className:"space-y-1 p-2",children:N.map(s=>{var t,a,l,i,y,_,w,v,L,k,C,S;return e.jsx(E,{href:Y("chat.show",s.order_id),className:`block p-3 bg-background rounded-lg border  hover:bg-muted hover:shadow-sm transition-shadow ${s.unread_count>0?"border-primary/30 bg-muted":"border-transparent"}`,children:e.jsxs("div",{className:"flex items-start",children:[e.jsxs("div",{className:"relative me-3",children:[e.jsxs(Q,{className:"h-12 w-12",children:[e.jsx(U,{src:(t=s.other_user)==null?void 0:t.avatar}),e.jsx(R,{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white",children:(l=(a=s.other_user)==null?void 0:a.name)==null?void 0:l.charAt(0)})]}),e.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-0.5 shadow-sm",children:s.statusInfo.icon})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-medium flex items-center",children:[(i=s.other_user)==null?void 0:i.name,e.jsx(x,{variant:"outline",className:"ms-2 text-xs capitalize",children:((y=s.other_user)==null?void 0:y.role)==="client"?r("auth.client"):((_=s.other_user)==null?void 0:_.role)==="freelancer"?r("auth.freelancer"):(w=s.other_user)==null?void 0:w.role})]}),e.jsxs("div",{className:"flex items-center mt-1",children:[e.jsx(x,{variant:"outline",className:`text-xs ${s.statusInfo.color}`,children:r(`orders.status.${s.order_status}`)}),e.jsxs("span",{className:"text-xs text-muted-foreground ms-2",children:["#",s.order_number]})]})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:$((v=s.last_message)==null?void 0:v.created_at)})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("p",{className:"text-sm text-muted-foreground line-clamp-1",children:[((L=s.last_message)==null?void 0:L.file_type)==="image"&&e.jsx(V,{className:"inline me-1 w-4 h-4"}),((k=s.last_message)==null?void 0:k.file_type)==="doc"&&e.jsx(W,{className:"inline me-1 w-4 h-4"}),((C=s.last_message)==null?void 0:C.content)||(((S=s.last_message)==null?void 0:S.file_type)==="final_delivery"?r("chatList.finalDeliverySubmitted"):r("chatList.noMessagesYet"))]})})]}),s.unread_count>0&&e.jsx("div",{className:"ms-3",children:e.jsx(x,{className:"bg-primary text-primary-foreground",children:s.unread_count})})]})},s.id)})})})]})]})]})}export{Ye as default};
